import{u as e}from"./useQuery-DzRLwVkj.js";import{aK as t}from"./index-DbEKal5d.js";import{u as n}from"./useMutation-CdDHAm4w.js";import{a as i}from"./appointmentService-DsFhdOZl.js";function o(){const o=t(),{data:a=[],isLoading:p,error:r}=e({queryKey:["appointments"],queryFn:i.getAllAppointments,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0});return{appointments:a,isLoadingAppointments:p,appointmentsError:r,getAppointmentById:t=>e({queryKey:["appointment",t],queryFn:()=>i.getAppointmentById(t),enabled:!!t}),getAppointmentsByClinic:t=>e({queryKey:["appointments","clinic",t],queryFn:()=>i.getAppointmentsByClinic(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),getAppointmentsByDoctor:t=>e({queryKey:["appointments","doctor",t],queryFn:()=>i.getAppointmentsByDoctor(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),getAppointmentsByUser:t=>e({queryKey:["appointments","user",t],queryFn:()=>i.getAppointmentsByUser(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),getAppointmentStatus:t=>e({queryKey:["appointment-status",t],queryFn:()=>i.getAppointmentStatus(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0}),getAvailableSlots:(t,n)=>e({queryKey:["available-slots",t,n],queryFn:()=>i.getAvailableSlots(t,n),enabled:!!t&&!!(null==n?void 0:n.from)&&!!(null==n?void 0:n.to),retry:1,staleTime:0}),createAppointment:n({mutationFn:i.createAppointment,onSuccess:()=>{o.invalidateQueries({queryKey:["appointments"]})}}),createAppointmentWithPatient:n({mutationFn:i.createAppointmentWithPatient,onSuccess:e=>{var t,n;o.invalidateQueries({predicate:e=>"appointments"===e.queryKey[0]}),(null==(t=null==e?void 0:e.appointment)?void 0:t.doctorId)&&o.invalidateQueries({queryKey:["appointments","doctor",e.appointment.doctorId]}),(null==(n=null==e?void 0:e.appointment)?void 0:n.userId)&&localStorage.setItem("lastPatientUserId",e.appointment.userId)}}),updateAppointment:n({mutationFn:i.updateAppointment,onSuccess:()=>{o.invalidateQueries({predicate:e=>"appointments"===e.queryKey[0]})}}),deleteAppointment:n({mutationFn:i.deleteAppointment,onSuccess:()=>{o.invalidateQueries({predicate:e=>"appointments"===e.queryKey[0]})}}),updateAppointmentStatus:n({mutationFn:({appointmentId:e,newStatus:t})=>i.updateAppointmentStatus(e,t),onSuccess:()=>{o.invalidateQueries({predicate:e=>"appointments"===e.queryKey[0]})}}),checkAvailableSlots:n({mutationFn:({doctorId:e,timeSlotData:t})=>i.getAvailableSlots(e,t)})}}export{o as u};
