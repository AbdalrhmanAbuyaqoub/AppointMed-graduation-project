import{a1 as v,j as e,a2 as z,S as j,Y as p,G as c,T as d,K as S,F as m,W as y,n as b,C as f,L as E,D as k,a0 as N,t as I}from"./ui-DwlZS5FE.js";import{y as L,j as M,p as D,t as H}from"./icons-CEIuXgFH.js";import{u as O,r as g}from"./router-DP3ythCP.js";import{u as C,c as B}from"./appointments-D_E_DIOB.js";import"./vendor-DJG_os-6.js";import"./query-CPQchYQR.js";import"./chat-DfZj3kwJ.js";function T({clinic:s}){var o,t;const a=O(),{hovered:l,ref:i}=v();return e.jsx(z,{ref:i,padding:"lg",radius:"md",withBorder:!0,style:{transform:l?"translateY(-3px)":"none",transition:"transform 0.1s, box-shadow 0.1s"},children:e.jsxs(j,{gap:"xs",children:[e.jsx(p,{order:3,size:"xl",children:s.name}),e.jsxs(c,{gap:"xs",children:[e.jsx(L,{size:18}),e.jsxs(d,{size:"sm",c:"dimmed",fw:500,children:[((o=s.doctors)==null?void 0:o.length)||0," ",!((t=s.doctors)!=null&&t.length)||s.doctors.length===1?"Doctor":"Doctors"]})]}),s.workingHours&&e.jsxs(c,{gap:"xs",children:[e.jsx(M,{size:18}),e.jsx(d,{size:"sm",c:"dimmed",fw:500,children:s.workingHours})]}),s.specialties&&s.specialties.length>0&&e.jsx(c,{gap:"xs",mt:"xs",children:s.specialties.map(n=>e.jsx(S,{variant:"light",children:n},n))}),e.jsx(m,{variant:"light",fullWidth:!0,mt:"xl",radius:"md",onClick:()=>a(`/clinics/${s.id}`),children:"Manage Clinic"})]})})}function G({opened:s,onClose:a}){const[l,i]=g.useState(""),[o,t]=g.useState(!1),{createClinic:n,isCreating:u}=C(),x=async h=>{if(h.preventDefault(),!l.trim()){t(!0);return}try{await n({name:l.trim()}),i(""),t(!1),a()}catch(w){console.error("Error creating clinic:",w)}},r=()=>{i(""),t(!1),a()};return e.jsx(y,{xOffset:{m:200},centered:!0,withOverlay:!1,opened:s,onClose:r,title:e.jsx(d,{fz:"lg",fw:700,children:"Create New Clinic"}),size:"md",radius:"md",children:e.jsxs("form",{onSubmit:x,children:[e.jsx(b,{labelProps:{ml:4,fz:"md"},label:"Clinic Name",placeholder:"eg. Heart Clinic",value:l,onChange:h=>{i(h.target.value),o&&t(!1)},withAsterisk:!0,error:o?"Clinic name is required":null,size:"md"}),e.jsxs(c,{justify:"flex-end",mt:"xl",children:[e.jsx(m,{variant:"outline",onClick:r,children:"Cancel"}),e.jsx(m,{type:"submit",loading:u,children:"Create Clinic"})]})]})})}function K(){const[s,a]=g.useState(!1),{searchQuery:l}=B(),{clinics:i=[],isLoading:o,isError:t,error:n}=C(),u=i.filter(r=>r.name.toLowerCase().includes(l.toLowerCase()));if(t)return e.jsx(f,{children:e.jsxs(d,{c:"red",children:["Error: ",(n==null?void 0:n.message)||"An error occurred"]})});if(o)return e.jsxs(f,{children:[e.jsx(E,{visible:!0}),e.jsx(d,{children:"Loading clinics..."})]});const x=r=>e.jsx(I,{children:e.jsxs(j,{align:"center",gap:"md",children:[e.jsx(H,{size:50,opacity:.4}),e.jsx(d,{size:"lg",fw:400,c:"dimmed",children:r})]})});return e.jsxs(f,{pt:12,maw:1232,fluid:!0,children:[e.jsxs(j,{children:[e.jsx(p,{fz:"24px",fw:700,order:2,children:"Clinics Management"}),e.jsx(c,{mt:40,justify:"flex-end",children:e.jsx(m,{size:"lg",radius:"xl",variant:"outline",leftSection:e.jsx(D,{size:20}),onClick:()=>a(!0),children:"New Clinic"})}),e.jsx(k,{}),!i||i.length===0?x("No clinics found."):u.length===0?x("No clinics found matching your search."):e.jsx(N,{cols:{base:1,sm:2,md:2,lg:3},spacing:"xl",children:u.map(r=>e.jsx(T,{clinic:r,doctors:r.doctors},r.id))})]}),e.jsx(G,{opened:s,onClose:()=>a(!1)})]})}export{K as default};
