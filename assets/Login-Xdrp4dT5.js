import{r as f,k as ye,l as E,m as R,n as M,o as $,p as X,j as e,U as je,q as A,s as Z,v as ee,B as F,w as se,x as V,y as oe,z as re,D as we,E as Se,c as Pe,F as te,b as G,H as ze,d as I,J as ae,a as ne,K as N,i as ie,u as Ie,L as _e,C as Le,t as Ve,M as Te,P as Ee,N as Re,G as J,O as Be}from"./index-By0p5ZE8.js";import{A as T,I as K,u as Ne}from"./useStore-CzZBCWqC.js";import{u as ce}from"./use-form-BNB0R-SX.js";import{A as le,P as Fe}from"./PasswordInput-BALLlNiw.js";import{g as de}from"./get-auto-contrast-value-Da6zqqWm.js";import{I as Ge,a as Me,b as $e}from"./InputsGroupFieldset-DvNJ5Q-1.js";const ue=f.createContext(null),Ae=ue.Provider,me=()=>f.useContext(ue),[qe,We]=ye();var he={card:"m_26775b0a"};const Oe={withBorder:!0},Ue=$((o,{radius:r})=>({card:{"--card-radius":A(r)}})),q=E((o,r)=>{const s=R("CheckboxCard",Oe,o),{classNames:m,className:c,style:u,styles:n,unstyled:i,vars:a,checked:h,mod:l,withBorder:C,value:t,onClick:d,defaultChecked:v,onChange:x,...y}=s,j=M({name:"CheckboxCard",classes:he,props:s,className:c,style:u,classNames:m,styles:n,unstyled:i,vars:a,varsResolver:Ue,rootSelector:"card"}),p=me(),w=typeof h=="boolean"?h:p?p.value.includes(t||""):void 0,[b,g]=X({value:w,defaultValue:v,finalValue:!1,onChange:x});return e.jsx(qe,{value:{checked:b},children:e.jsx(je,{ref:r,mod:[{"with-border":C,checked:b},l],...j("card"),...y,role:"checkbox","aria-checked":b,onClick:k=>{d==null||d(k),p==null||p.onChange(t||""),g(!b)}})})});q.displayName="@mantine/core/CheckboxCard";q.classes=he;const De={},W=E((o,r)=>{const{value:s,defaultValue:m,onChange:c,size:u,wrapperProps:n,children:i,readOnly:a,...h}=R("CheckboxGroup",De,o),[l,C]=X({value:s,defaultValue:m,finalValue:[],onChange:c}),t=d=>{const v=typeof d=="string"?d:d.currentTarget.value;!a&&C(l.includes(v)?l.filter(x=>x!==v):[...l,v])};return e.jsx(Ae,{value:{value:l,onChange:t,size:u},children:e.jsx(Z.Wrapper,{size:u,ref:r,...n,...h,labelElement:"div",__staticSelector:"CheckboxGroup",children:e.jsx(Ge,{role:"group",children:i})})})});W.classes=Z.Wrapper.classes;W.displayName="@mantine/core/CheckboxGroup";var pe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Ye={icon:ee},He=$((o,{radius:r,color:s,size:m,iconColor:c,variant:u,autoContrast:n})=>{const i=se({color:s||o.primaryColor,theme:o}),a=i.isThemeColor&&i.shade===void 0?`var(--mantine-color-${i.color}-outline)`:i.color;return{indicator:{"--checkbox-size":re(m,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:A(r),"--checkbox-color":u==="outline"?a:V(s,o),"--checkbox-icon-color":c?V(c,o):de(n,o)?oe({color:s,theme:o,autoContrast:n}):void 0}}}),O=E((o,r)=>{const s=R("CheckboxIndicator",Ye,o),{classNames:m,className:c,style:u,styles:n,unstyled:i,vars:a,icon:h,indeterminate:l,radius:C,color:t,iconColor:d,autoContrast:v,checked:x,mod:y,variant:j,disabled:p,...w}=s,b=h,g=M({name:"CheckboxIndicator",classes:pe,props:s,className:c,style:u,classNames:m,styles:n,unstyled:i,vars:a,varsResolver:He,rootSelector:"indicator"}),k=We(),B=typeof x=="boolean"||typeof l=="boolean"?x||l:(k==null?void 0:k.checked)||!1;return e.jsx(F,{ref:r,...g("indicator",{variant:j}),variant:j,mod:[{checked:B,disabled:p},y],...w,children:e.jsx(b,{indeterminate:l,...g("icon")})})});O.displayName="@mantine/core/CheckboxIndicator";O.classes=pe;var xe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Je={labelPosition:"right",icon:ee},Ke=$((o,{radius:r,color:s,size:m,iconColor:c,variant:u,autoContrast:n})=>{const i=se({color:s||o.primaryColor,theme:o}),a=i.isThemeColor&&i.shade===void 0?`var(--mantine-color-${i.color}-outline)`:i.color;return{root:{"--checkbox-size":re(m,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:A(r),"--checkbox-color":u==="outline"?a:V(s,o),"--checkbox-icon-color":c?V(c,o):de(n,o)?oe({color:s,theme:o,autoContrast:n}):void 0}}}),z=E((o,r)=>{const s=R("Checkbox",Je,o),{classNames:m,className:c,style:u,styles:n,unstyled:i,vars:a,color:h,label:l,id:C,size:t,radius:d,wrapperProps:v,checked:x,labelPosition:y,description:j,error:p,disabled:w,variant:b,indeterminate:g,icon:k,rootRef:B,iconColor:Xe,onChange:_,autoContrast:Ze,mod:be,...ge}=s,S=me(),fe=t||(S==null?void 0:S.size),Ce=k,L=M({name:"Checkbox",props:s,classes:xe,className:c,style:u,classNames:m,styles:n,unstyled:i,vars:a,varsResolver:Ke}),{styleProps:ve,rest:U}=we(ge),D=Se(C),Y=S?{checked:S.value.includes(U.value),onChange:H=>{S.onChange(H),_==null||_(H)}}:{},ke=f.useRef(null),P=r||ke;return f.useEffect(()=>{P&&"current"in P&&P.current&&(P.current.indeterminate=g||!1)},[g,P]),e.jsx(Me,{...L("root"),__staticSelector:"Checkbox",__stylesApiProps:s,id:D,size:fe,labelPosition:y,label:l,description:j,error:p,disabled:w,classNames:m,styles:n,unstyled:i,"data-checked":Y.checked||x||void 0,variant:b,ref:B,mod:be,...ve,...v,children:e.jsxs(F,{...L("inner"),mod:{"data-label-position":y},children:[e.jsx(F,{component:"input",id:D,ref:P,checked:x,disabled:w,mod:{error:!!p,indeterminate:g},...L("input",{focusable:!0,variant:b}),onChange:_,...U,...Y,type:"checkbox"}),e.jsx(Ce,{indeterminate:g,...L("icon")})]})})});z.classes={...xe,...$e};z.displayName="@mantine/core/Checkbox";z.Group=W;z.Indicator=O;z.Card=q;/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q=Pe("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);const Qe=({onBackToLogin:o})=>{const[r,s]=f.useState(!1),[m,c]=f.useState(!1),{handleForgotPassword:u}=te(),n=ce({initialValues:{email:""},validate:{email:h=>h?/^\S+@\S+$/.test(h)?null:"Invalid email address":"Email is required"}}),i=async h=>{s(!0);try{const l=await u(h.email);l.success?(c(!0),N.show({title:"Success",message:l.message,color:"green",icon:e.jsx(ie,{size:16})}),n.reset()):N.show({title:"Error",message:l.error,color:"red",icon:e.jsx(K,{size:16})})}catch{N.show({title:"Error",message:"An unexpected error occurred. Please try again.",color:"red",icon:e.jsx(K,{size:16})})}s(!1)},a=()=>{c(!1),n.reset(),o()};return m?e.jsxs(G,{children:[e.jsx(le,{icon:e.jsx(ze,{size:16}),title:"Email Sent",color:"green",variant:"light",children:"We've sent a new password to your email address. Please check your inbox and use the new password to log in."}),e.jsx(I,{ta:"center",size:"sm",mt:"md",children:e.jsxs(T,{component:"button",type:"button",onClick:a,fw:500,disabled:r,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx(Q,{size:16}),"Back to Login"]})})]}):e.jsx("form",{onSubmit:n.onSubmit(i),children:e.jsxs(G,{children:[e.jsx(ae,{required:!0,radius:"md",label:"Email Address",placeholder:"your@email.com",value:n.values.email,onChange:h=>n.setFieldValue("email",h.currentTarget.value),error:n.errors.email,disabled:r,size:"md"}),e.jsx(I,{size:"sm",c:"dimmed",ta:"center",children:"We'll send you a new password to your email address."}),e.jsx(ne,{type:"submit",radius:"xl",fullWidth:!0,loading:r,disabled:!n.values.email,size:"lg",mt:"md",children:"Send New Password"}),e.jsx(I,{ta:"center",size:"sm",mt:"md",children:e.jsxs(T,{component:"button",type:"button",onClick:a,fw:500,disabled:r,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx(Q,{size:16}),"Back to Login"]})})]})})},ns=()=>{const o=Ie(),r=_e(),s=Ne(t=>t.isLoading),{handleLogin:m}=te(),[c,u]=f.useState("login"),[n,i]=f.useState(""),a=ce({initialValues:{email:"",password:"",rememberMe:!1},validate:{email:t=>t?/^\S+@\S+$/.test(t)?null:"Invalid email address":"Email is required",password:t=>t?null:"Password is required"}});f.useEffect(()=>{var t;(t=r.state)!=null&&t.message&&(i(r.state.message),r.state.email&&a.setFieldValue("email",r.state.email),o(r.pathname,{replace:!0}))},[r.state,o,a]);const h=async t=>{try{const d=await m({email:t.email,password:t.password,rememberMe:t.rememberMe});if(!(d!=null&&d.success))throw new Error((d==null?void 0:d.error)||"Login failed")}catch(d){console.error("Login error:",d)}},l=()=>{u("forgot-password")},C=()=>{u("login")};return e.jsxs(Le,{w:"100vw",h:"100vh",fluid:!0,bg:Ve.backgroundColor,children:[e.jsx(Te,{h:"50"}),e.jsxs(Ee,{withBorder:!0,shadow:"md",radius:"lg",p:"xl",w:"100%",maw:400,mx:"auto",pos:"relative",children:[e.jsx(Re,{visible:s,overlayProps:{blur:2}}),e.jsx(J,{pb:"md",justify:"center",children:e.jsx(Be,{height:60,width:60,onClick:()=>o("/"),cursor:"pointer"})}),e.jsx(I,{size:"xl",ta:"center",mb:"xl",fw:500,children:c==="login"?"Login to your account":"Reset Your Password"}),n&&e.jsx(le,{icon:e.jsx(ie,{size:16}),title:"Success",color:"green",variant:"light",mb:"md",withCloseButton:!0,onClose:()=>i(""),children:n}),c==="login"?e.jsx("form",{onSubmit:a.onSubmit(h),children:e.jsxs(G,{gap:"md",children:[e.jsx(ae,{required:!0,label:"Email",placeholder:"your@email.com",value:a.values.email,onChange:t=>a.setFieldValue("email",t.currentTarget.value),error:a.errors.email,radius:"md",disabled:s,size:"md"}),e.jsx(Fe,{required:!0,label:"Password",placeholder:"Your password",value:a.values.password,onChange:t=>a.setFieldValue("password",t.currentTarget.value),error:a.errors.password,radius:"md",disabled:s,size:"md"}),e.jsx(z,{label:"Remember me",checked:a.values.rememberMe,onChange:t=>a.setFieldValue("rememberMe",t.currentTarget.checked),disabled:s,size:"sm"}),e.jsx(J,{justify:"flex-end",children:e.jsx(T,{component:"button",type:"button",onClick:l,size:"sm",disabled:s,children:"Forgot Password?"})}),e.jsx(ne,{type:"submit",radius:"xl",fullWidth:!0,loading:s,size:"lg",mt:"md",children:"Sign in"}),e.jsxs(I,{ta:"center",size:"sm",mt:"md",children:["Don't have an account?"," ",e.jsx(T,{component:"button",type:"button",onClick:()=>o("/register"),fw:500,disabled:s,children:"Sign up"})]})]})}):e.jsx(Qe,{onBackToLogin:C})]})]})};export{ns as default};
