import{r as V,o as $,w as F,s as U,j as e,B as O,a7 as q,E as J,a6 as K,c as H,a8 as X,C as N,e as Z,a9 as G,b as A,T as S,h as y,G as n,d as t,aa as ee,ab as R,P as E,ac as D,a3 as P,V as W}from"./index-CqLWFTqN.js";import{u as se,I as re}from"./useAppointmentQueries-8xFnz67F.js";import{u as te}from"./useWorkingHoursQueries-flPmVLmb.js";import{d as l,u as ae,t as ie}from"./timezone-CZ9yqTsO.js";import{G as p}from"./Grid-BHES9wk1.js";var Q={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const oe={},ne=J((d,{radius:j,color:o,variant:c,autoContrast:v})=>{const m=d.variantColorResolver({color:o||d.primaryColor,theme:d,variant:c||"light",autoContrast:v});return{root:{"--alert-radius":j===void 0?void 0:K(j),"--alert-bg":o||c?m.background:void 0,"--alert-color":m.color,"--alert-bd":o||c?m.border:void 0}}}),T=V((d,j)=>{const o=$("Alert",oe,d),{classNames:c,className:v,style:m,styles:C,unstyled:h,vars:k,radius:u,color:B,title:z,children:f,id:I,icon:w,withCloseButton:b,onClose:L,closeButtonLabel:s,variant:r,autoContrast:i,...x}=o,a=F({name:"Alert",classes:Q,props:o,className:v,style:m,classNames:c,styles:C,unstyled:h,vars:k,varsResolver:ne}),g=U(I),M=z&&`${g}-title`||void 0,_=`${g}-body`;return e.jsx(O,{id:g,...a("root",{variant:r}),variant:r,ref:j,...x,role:"alert","aria-describedby":_,"aria-labelledby":M,children:e.jsxs("div",{...a("wrapper"),children:[w&&e.jsx("div",{...a("icon"),children:w}),e.jsxs("div",{...a("body"),children:[z&&e.jsx("div",{...a("title"),"data-with-close-button":b||void 0,children:e.jsx("span",{id:M,...a("label"),children:z})}),f&&e.jsx("div",{id:_,...a("message"),"data-variant":r,children:f})]}),b&&e.jsx(q,{...a("closeButton"),onClick:L,variant:"transparent",size:16,iconSize:16,"aria-label":s,unstyled:h})]})})});T.classes=Q;T.displayName="@mantine/core/Alert";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var le=H("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y=H("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);l.extend(ae);l.extend(ie);function pe(){const{appointments:d,isLoadingAppointments:j,appointmentsError:o}=se(),{doctors:c,isLoading:v}=X(),{doctorsWorkingDays:m,isLoading:C}=te(),h=l(),k=h.day(),u=c.filter(s=>(m[s.id]||[]).includes(k)),B=d.filter(s=>s.startDate?l.utc(s.startDate).tz(l.tz.guess()).isSame(h,"day"):!1),f=d.filter(s=>{if(!s.startDate)return!1;const r=l.utc(s.startDate).tz(l.tz.guess());return r.isAfter(h)&&r.isBefore(h.add(7,"day"))}).reduce((s,r)=>{var a,g;const i=(a=r.doctor)==null?void 0:a.id,x=((g=r.doctor)==null?void 0:g.name)||r.doctorName;return!i||!x||(s[i]||(s[i]={doctorName:x,doctorId:i,appointments:[]}),s[i].appointments.push(r)),s},{}),I=u.length*8,w=B.length,b=I-w;return j||v||C?e.jsx(N,{fluid:!0,maw:1232,children:e.jsx(Z,{h:400,children:e.jsx(G,{size:"lg"})})}):o?e.jsx(N,{fluid:!0,maw:1232,children:e.jsxs(T,{icon:e.jsx(le,{size:"1rem"}),title:"Error",color:"red",children:["Failed to load dashboard data: ",o.message]})}):e.jsx(N,{fluid:!0,maw:1232,pt:12,children:e.jsxs(A,{gap:"xl",children:[e.jsx(S,{order:2,size:"h2",children:"Dashboard"}),e.jsxs(p,{children:[e.jsx(p.Col,{span:{base:12,md:4},children:e.jsx(y,{withBorder:!0,radius:"md",p:"lg",children:e.jsxs(n,{justify:"space-between",children:[e.jsxs("div",{children:[e.jsx(t,{c:"dimmed",size:"sm",fw:700,tt:"uppercase",children:"Doctors Available Today"}),e.jsx(t,{fw:700,size:"xl",children:u.length})]}),e.jsx(ee,{size:32,color:"var(--mantine-color-blue-6)"})]})})}),e.jsx(p.Col,{span:{base:12,md:4},children:e.jsx(y,{withBorder:!0,radius:"md",p:"lg",children:e.jsxs(n,{justify:"space-between",children:[e.jsxs("div",{children:[e.jsx(t,{c:"dimmed",size:"sm",fw:700,tt:"uppercase",children:"Available Slots Today"}),e.jsx(t,{fw:700,size:"xl",children:b>0?b:0})]}),e.jsx(R,{size:32,color:"var(--mantine-color-green-6)"})]})})}),e.jsx(p.Col,{span:{base:12,md:4},children:e.jsx(y,{withBorder:!0,radius:"md",p:"lg",children:e.jsxs(n,{justify:"space-between",children:[e.jsxs("div",{children:[e.jsx(t,{c:"dimmed",size:"sm",fw:700,tt:"uppercase",children:"Today's Appointments"}),e.jsx(t,{fw:700,size:"xl",children:B.length})]}),e.jsx(Y,{size:32,color:"var(--mantine-color-orange-6)"})]})})})]}),e.jsxs(p,{children:[e.jsx(p.Col,{span:{base:12,lg:6},children:e.jsxs(E,{withBorder:!0,radius:"md",p:"lg",children:[e.jsxs(n,{justify:"space-between",mb:"md",children:[e.jsx(S,{order:3,size:"h4",children:"Doctors Available Today"}),e.jsxs(D,{color:"blue",variant:"light",children:[u.length," doctors"]})]}),e.jsx(P,{h:400,children:e.jsx(A,{gap:"sm",children:u.length===0?e.jsx(t,{c:"dimmed",ta:"center",py:"xl",children:"No doctors available today"}):u.map(s=>{var r;return e.jsx(y,{withBorder:!0,radius:"sm",p:"md",children:e.jsxs(n,{children:[e.jsx(W,{size:"md",radius:"xl",color:"blue",children:((r=s.name)==null?void 0:r.charAt(0))||"D"}),e.jsxs(O,{flex:1,children:[e.jsx(t,{fw:600,size:"sm",children:s.name}),e.jsxs(n,{gap:"xs",children:[e.jsx(re,{size:14,color:"var(--mantine-color-dimmed)"}),e.jsx(t,{size:"xs",c:"dimmed",children:s.clinicName})]})]}),e.jsx(D,{color:"green",variant:"light",size:"sm",children:"Available"})]})},s.id)})})})]})}),e.jsx(p.Col,{span:{base:12,lg:6},children:e.jsxs(E,{withBorder:!0,radius:"md",p:"lg",children:[e.jsxs(n,{justify:"space-between",mb:"md",children:[e.jsx(S,{order:3,size:"h4",children:"Upcoming Appointments"}),e.jsx(D,{color:"orange",variant:"light",children:"Next 7 days"})]}),e.jsx(P,{h:400,children:e.jsx(A,{gap:"md",children:Object.keys(f).length===0?e.jsx(t,{c:"dimmed",ta:"center",py:"xl",children:"No upcoming appointments"}):Object.values(f).map(s=>{var r;return e.jsxs(y,{withBorder:!0,radius:"sm",p:"md",children:[e.jsxs(n,{mb:"sm",children:[e.jsx(W,{size:"sm",radius:"xl",color:"orange",children:((r=s.doctorName)==null?void 0:r.charAt(0))||"D"}),e.jsxs(t,{fw:600,size:"sm",children:["Dr. ",s.doctorName]}),e.jsxs(D,{size:"xs",color:"blue",variant:"light",children:[s.appointments.length," appointments"]})]}),e.jsxs(A,{gap:"xs",ml:"md",children:[s.appointments.slice(0,3).map(i=>{const x=l.utc(i.startDate).tz(l.tz.guess());return e.jsxs(n,{gap:"xs",children:[e.jsx(R,{size:14,color:"var(--mantine-color-dimmed)"}),e.jsx(t,{size:"xs",c:"dimmed",children:x.format("MMM D, YYYY")}),e.jsx(Y,{size:14,color:"var(--mantine-color-dimmed)"}),e.jsx(t,{size:"xs",c:"dimmed",children:x.format("h:mm A")}),e.jsx(t,{size:"xs",fw:500,children:i.patientName})]},i.id)}),s.appointments.length>3&&e.jsxs(t,{size:"xs",c:"dimmed",fs:"italic",children:["+",s.appointments.length-3," more appointments"]})]})]},s.doctorId)})})})]})})]})]})})}export{pe as default};
