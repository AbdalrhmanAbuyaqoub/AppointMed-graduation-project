import{aa as T,u as C,j as e,b as f,e as k,d as c,G as h,V as w,a7 as b,B as v,X as j,au as S,av as z,C as I,at as L,a as p,t as A,T as O,ae as B,P as W,aN as G}from"./index-Yqc44LFA.js";import{u as P,D as E}from"./useWorkingHoursQueries-BSvm7yvy.js";import{S as g,I as H}from"./IconUserOff-DG3O4TbW.js";import{T as r}from"./Table-BhI_H3rt.js";import"./appointmentService-tGjyUJJe.js";import"./timezone-YNkisRrB.js";function M({doctorId:d,workingDays:a}){return e.jsx(h,{gap:"8",children:E.map(t=>{const n=a.includes(t.value);return e.jsx(v,{bg:n?"violet":"gray.4",fw:500,p:4,h:24,w:24,style:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},title:t.day,children:e.jsx(c,{size:"xs",fw:500,c:"white",children:t.letter})},t.value)})})}function Q({searchQuery:d=""}){const{doctors:a,isLoading:t}=T(),{doctorsWorkingDays:n,isLoading:x}=P(),i=C(),l=s=>{i(`/doctors/${s}`)},m=s=>{i(`/clinics/${s}`)},u=a.filter(s=>{const o=d.toLowerCase();return s.name.toLowerCase().includes(o)||s.clinicName.toLowerCase().includes(o)});return t||x?e.jsxs(f,{children:[e.jsx(g,{height:40,radius:"sm"}),[1,2,3].map(s=>e.jsx(g,{height:50,radius:"sm",mt:"sm"},s))]}):e.jsxs(r,{highlightOnHover:!0,verticalSpacing:"sm",horizontalSpacing:"lg",children:[e.jsx(r.Thead,{children:e.jsxs(r.Tr,{children:[e.jsx(r.Th,{c:"dimmed",children:"Name"}),e.jsx(r.Th,{c:"dimmed",children:"Working Days"}),e.jsx(r.Th,{c:"dimmed",children:"Clinic"})]})}),e.jsx(r.Tbody,{children:u.length===0?e.jsx(r.Tr,{children:e.jsx(r.Td,{colSpan:3,children:e.jsx(k,{py:"xl",children:e.jsxs(f,{align:"center",gap:"md",children:[e.jsx(H,{size:30,opacity:.4}),e.jsx(c,{size:"sm",c:"dimmed",children:"No doctors found"})]})})})}):u.map(s=>e.jsxs(r.Tr,{style:{cursor:"pointer"},onClick:()=>l(s.id),children:[e.jsx(r.Td,{children:e.jsxs(h,{gap:"sm",children:[e.jsx(w,{color:"#e7edf6",style:{cursor:"pointer"},onClick:()=>l(s.id),size:"md",radius:"xl",variant:"filled",children:e.jsx(c,{fz:"sm",children:s.name.split(" ").map(o=>o[0]).join("").toUpperCase()})}),e.jsx(c,{size:"sm",fw:600,style:{cursor:"pointer"},onClick:()=>l(s.id),children:s.name})]})}),e.jsx(r.Td,{children:e.jsx(M,{doctorId:s.id,workingDays:n[s.id]||[]})}),e.jsx(r.Td,{children:e.jsx(b,{variant:"light",size:"lg",radius:"sm",px:"md",style:{cursor:"pointer"},onClick:()=>m(s.clinicId),children:s.clinicName})})]},s.id))})]})}function X(){const[d,a]=j.useState(!1),[t,n]=j.useState(!1),{searchQuery:x}=S(),[i,l]=j.useState({firstName:"",lastName:"",email:"",address:"",phoneNumber:"",selectedClinic:""}),{clinics:m,addDoctor:u,isAddingDoctor:s}=z(),o=C(),D=()=>{!m||m.length===0?n(!0):a(!0)},N=async()=>{if(i.firstName.trim()&&i.lastName.trim()&&i.email.trim()&&i.phoneNumber.trim())try{await u({clinicId:parseInt(i.selectedClinic),firstName:i.firstName.trim(),lastName:i.lastName.trim(),email:i.email.trim(),address:i.address.trim(),phoneNumber:i.phoneNumber.trim()}),l({firstName:"",lastName:"",email:"",address:"",phoneNumber:"",selectedClinic:""}),a(!1)}catch(y){console.error("Error adding doctor:",y)}};return e.jsxs(I,{pt:12,maw:1232,fluid:!0,children:[e.jsxs(L,{title:e.jsx(c,{fz:"lg",fw:700,children:"There is no Clinics"}),radius:"md",closeButtonProps:{radius:"xl"},centered:!0,opened:t,onClose:()=>n(!1),size:"md",children:[e.jsx(c,{fz:"sm",children:"You must create at least one clinic before adding a doctor."}),e.jsxs(h,{justify:"end",mt:"xl",children:[e.jsx(p,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(p,{bg:A.primaryColor,variant:"filled",onClick:()=>o("/clinics"),children:"Go to Clinics"})]})]}),e.jsxs(f,{children:[e.jsx(O,{fz:"24px",order:2,children:"Doctors"}),e.jsx(h,{mt:40,justify:"flex-end",children:e.jsx(p,{size:"lg",variant:"outline",leftSection:e.jsx(B,{size:20}),onClick:D,radius:"xl",children:"Add New Doctor"})}),e.jsx(W,{radius:"md",withBorder:!0,children:e.jsx(Q,{searchQuery:x})}),e.jsx(G,{opened:d,onClose:()=>a(!1),onSubmit:N,doctorData:i,setDoctorData:l,isLoading:s})]})]})}export{X as default};
