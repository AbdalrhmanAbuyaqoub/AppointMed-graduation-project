import{j as e,S as j,ah as g,U as r,t as k,T as l,G as x,A as T,K as w,B as b,C as v,W as S,F as p,Y as z,P as I}from"./ui-DwlZS5FE.js";import{u as C,r as f}from"./router-DP3ythCP.js";import{u as L}from"./doctors-DtG2Q8oG.js";import{e as A,D as O,c as W,u as B}from"./appointments-D_E_DIOB.js";import{g as G,t as H}from"./chat-DfZj3kwJ.js";import{H as P,p as E}from"./icons-CEIuXgFH.js";import{C as M}from"./CreateDoctorDrawer-QBUNG_Zj.js";import"./vendor-DJG_os-6.js";import"./query-CPQchYQR.js";function Q({doctorId:d,workingDays:n}){const o=n.length===0?[0,1,2,3,4,5,6]:n;return e.jsx(x,{gap:"8",children:O.map(t=>{const c=o.includes(t.value);return e.jsx(b,{bg:c?"violet":"gray.4",fw:500,p:4,h:24,w:24,style:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},title:t.day,children:e.jsx(l,{size:"xs",fw:500,c:"white",children:t.letter})},t.value)})})}function U({searchQuery:d=""}){const{doctors:n,isLoading:o}=L(),{doctorsWorkingDays:t,isLoading:c}=A(),i=C(),a=s=>{i(`/doctors/${s}`)},m=s=>{i(`/clinics/${s}`)},u=n.filter(s=>{const h=d.toLowerCase();return s.name.toLowerCase().includes(h)||s.clinicName.toLowerCase().includes(h)});return o||c?e.jsxs(j,{children:[e.jsx(g,{height:40,radius:"sm"}),[1,2,3].map(s=>e.jsx(g,{height:50,radius:"sm",mt:"sm"},s))]}):e.jsxs(r,{highlightOnHover:!0,verticalSpacing:"sm",horizontalSpacing:"lg",children:[e.jsx(r.Thead,{children:e.jsxs(r.Tr,{children:[e.jsx(r.Th,{c:"dimmed",children:"Name"}),e.jsx(r.Th,{c:"dimmed",children:"Working Days"}),e.jsx(r.Th,{c:"dimmed",children:"Clinic"})]})}),e.jsx(r.Tbody,{children:u.length===0?e.jsx(r.Tr,{children:e.jsx(r.Td,{colSpan:3,children:e.jsx(k,{py:"xl",children:e.jsxs(j,{align:"center",gap:"md",children:[e.jsx(P,{size:30,opacity:.4}),e.jsx(l,{size:"sm",c:"dimmed",children:"No doctors found"})]})})})}):u.map(s=>e.jsxs(r.Tr,{style:{cursor:"pointer"},onClick:()=>a(s.id),children:[e.jsx(r.Td,{children:e.jsxs(x,{gap:"sm",children:[e.jsx(T,{color:"#e7edf6",style:{cursor:"pointer"},onClick:()=>a(s.id),size:"md",radius:"xl",variant:"filled",children:e.jsx(l,{fz:"sm",children:G({fullName:s.name})})}),e.jsx(l,{size:"sm",fw:600,style:{cursor:"pointer"},onClick:()=>a(s.id),children:s.name})]})}),e.jsx(r.Td,{children:e.jsx(Q,{doctorId:s.id,workingDays:t[s.id]||[]})}),e.jsx(r.Td,{children:e.jsx(w,{variant:"light",size:"lg",radius:"sm",px:"md",style:{cursor:"pointer"},onClick:()=>m(s.clinicId),children:s.clinicName})})]},s.id))})]})}function X(){const[d,n]=f.useState(!1),[o,t]=f.useState(!1),{searchQuery:c}=W(),[i,a]=f.useState({firstName:"",lastName:"",email:"",address:"",phoneNumber:"",selectedClinic:""}),{clinics:m,addDoctor:u,isAddingDoctor:s}=B(),h=C(),D=()=>{!m||m.length===0?t(!0):n(!0)},N=async()=>{if(i.firstName.trim()&&i.lastName.trim()&&i.email.trim()&&i.phoneNumber.trim())try{await u({clinicId:parseInt(i.selectedClinic),firstName:i.firstName.trim(),lastName:i.lastName.trim(),email:i.email.trim(),address:i.address.trim(),phoneNumber:i.phoneNumber.trim()}),a({firstName:"",lastName:"",email:"",address:"",phoneNumber:"",selectedClinic:""}),n(!1)}catch(y){console.error("Error adding doctor:",y)}};return e.jsxs(v,{pt:12,maw:1232,fluid:!0,children:[e.jsxs(S,{title:e.jsx(l,{fz:"lg",fw:700,children:"There is no Clinics"}),radius:"md",closeButtonProps:{radius:"xl"},centered:!0,opened:o,onClose:()=>t(!1),size:"md",children:[e.jsx(l,{fz:"sm",children:"You must create at least one clinic before adding a doctor."}),e.jsxs(x,{justify:"end",mt:"xl",children:[e.jsx(p,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(p,{bg:H.primaryColor,variant:"filled",onClick:()=>h("/clinics"),children:"Go to Clinics"})]})]}),e.jsxs(j,{children:[e.jsx(z,{fz:"24px",order:2,children:"Doctors"}),e.jsx(x,{mt:40,justify:"flex-end",children:e.jsx(p,{size:"lg",variant:"outline",leftSection:e.jsx(E,{size:20}),onClick:D,radius:"xl",children:"New Doctor"})}),e.jsx(I,{radius:"md",withBorder:!0,children:e.jsx(U,{searchQuery:c})}),e.jsx(M,{opened:d,onClose:()=>n(!1),onSubmit:N,doctorData:i,setDoctorData:a,isLoading:s})]})]})}export{X as default};
