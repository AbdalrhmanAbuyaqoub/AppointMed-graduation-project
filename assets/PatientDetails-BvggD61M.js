import{b as B,j as e,C as h,L,G as n,p as f,Y as l,P as x,t as c,T as s,S as t,A as M,K as j,F as U,D as E,U as r}from"./ui-DwlZS5FE.js";import{f as k,d as O}from"./appointments-D_E_DIOB.js";import{g as F}from"./chat-DfZj3kwJ.js";import{D as G}from"./DeleteConfirmationModal-Z1sWrh4u.js";import{e as H,u as K,r as Q}from"./router-DP3ythCP.js";import{r as z,n as q,c as J,s as R,J as V,h as Y,u as W,j as T,K as X}from"./icons-CEIuXgFH.js";import"./vendor-DJG_os-6.js";import"./query-CPQchYQR.js";const Z={0:"Scheduled",1:"Cancelled",2:"Completed",3:"No Show"},_={0:"blue",1:"red",2:"green",3:"orange"};function le(){const{id:u}=H(),o=K();B();const[v,m]=Q.useState(!1),{patients:D,isLoading:N,deleteAccount:w,isDeletingAccount:y}=k(),{getAppointmentsByUser:C}=O(),i=D.find(a=>a.id===u),{data:d=[],isLoading:A,error:p}=C(u),I=N||A,S=()=>{i&&(w({email:i.email,id:i.id}),m(!1),o("/patients"))};return I?e.jsx(h,{pt:20,maw:1232,fluid:!0,children:e.jsx(L,{visible:!0})}):i?e.jsx(c,{children:e.jsxs(h,{pt:20,fluid:!0,children:[e.jsxs(n,{mb:"xl",children:[e.jsx(f,{hiddenFrom:"sm",variant:"subtle",onClick:()=>o("/patients"),size:"lg",children:e.jsx(z,{size:20})}),e.jsx(l,{order:2,children:"Patient Details"})]}),e.jsx(x,{p:"xl",radius:"md",withBorder:!0,w:1232,children:e.jsxs(t,{gap:"xl",children:[e.jsxs(n,{gap:"xl",align:"flex-start",children:[e.jsx(M,{size:"xl",radius:"50%",variant:"filled",color:"gray.3",children:e.jsx(s,{fz:30,children:F({fullName:i.fullName})})}),e.jsxs(t,{gap:"xs",style:{flex:1},children:[e.jsx(l,{order:2,fz:28,children:i.fullName}),e.jsxs(n,{gap:"md",children:[e.jsx(j,{size:"lg",variant:"filled",color:"blue",children:"PATIENT"}),e.jsx(j,{variant:"filled",size:"lg",color:i.isBanned?"red":"green",children:i.isBanned?"BANNED":"ACTIVE"})]})]}),e.jsx(U,{variant:"outline",color:"red",leftSection:e.jsx(q,{size:16}),onClick:()=>m(!0),radius:"md",size:"sm",children:"Delete Patient"})]}),e.jsx(E,{}),e.jsxs(n,{cols:{base:1,sm:2},gap:"xl",children:[e.jsxs(t,{gap:"md",children:[e.jsx(l,{order:3,size:"h4",children:"Basic Information"}),e.jsxs(n,{gap:"md",children:[e.jsx(J,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Full Name:"}),e.jsx(s,{size:"sm",children:i.fullName})]}),e.jsxs(n,{gap:"md",children:[e.jsx(R,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Email:"}),e.jsx(s,{size:"sm",children:i.email})]}),e.jsxs(n,{gap:"md",children:[e.jsx(V,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Status:"}),e.jsx(s,{size:"sm",children:i.isBanned?"Banned":"Active"})]})]}),e.jsxs(t,{gap:"md",children:[e.jsx(l,{order:3,size:"h4",children:"Contact Information"}),e.jsxs(n,{gap:"md",children:[e.jsx(Y,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Phone:"}),e.jsx(s,{size:"sm",children:i.phoneNumber||"Not provided"})]}),e.jsxs(n,{gap:"md",children:[e.jsx(W,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Address:"}),e.jsx(s,{size:"sm",children:i.address||"Not provided"})]})]})]})]})}),e.jsx(x,{p:"xl",mt:"xl",radius:"md",withBorder:!0,maw:1232,children:e.jsxs(t,{gap:"xl",children:[e.jsxs(n,{justify:"space-between",align:"center",children:[e.jsx(l,{order:3,children:"Appointment History"}),e.jsxs(n,{gap:"xs",children:[e.jsx(T,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsxs(s,{size:"sm",c:"dimmed",children:[d.length," appointment",d.length!==1?"s":""]})]})]}),p?e.jsx(c,{py:"xl",children:e.jsxs(s,{c:"red",children:["Error loading appointments: ",p.message]})}):d.length===0?e.jsx(c,{py:"xl",children:e.jsxs(t,{align:"center",gap:"md",children:[e.jsx(T,{size:48,opacity:.4}),e.jsx(s,{size:"lg",c:"dimmed",children:"No appointments found"}),e.jsx(s,{size:"sm",c:"dimmed",children:"This patient has no scheduled appointments."})]})}):e.jsxs(r,{highlightOnHover:!0,verticalSpacing:"sm",children:[e.jsx(r.Thead,{children:e.jsxs(r.Tr,{children:[e.jsx(r.Th,{c:"dimmed",children:"Date & Time"}),e.jsx(r.Th,{c:"dimmed",children:"Doctor"}),e.jsx(r.Th,{c:"dimmed",children:"Clinic"}),e.jsx(r.Th,{c:"dimmed",children:"Status"}),e.jsx(r.Th,{c:"dimmed",children:"Notes"})]})}),e.jsx(r.Tbody,{children:d.map(a=>{var g;const b=Z[a.status]||"Scheduled",P=_[a.status]||"blue";return e.jsxs(r.Tr,{children:[e.jsx(r.Td,{children:e.jsxs(n,{gap:"xs",children:[e.jsx(X,{size:16,opacity:.6}),e.jsxs(t,{gap:"0",children:[e.jsx(s,{size:"sm",fw:500,children:new Date(a.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsxs(s,{size:"xs",c:"dimmed",children:[new Date(a.startDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})," ","-"," ",new Date(a.endDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})}),e.jsx(r.Td,{children:e.jsx(s,{size:"sm",fw:500,children:((g=a.doctor)==null?void 0:g.name)||"N/A"})}),e.jsx(r.Td,{children:e.jsx(s,{size:"sm",c:"dimmed",children:a.clinicName||"N/A"})}),e.jsx(r.Td,{children:e.jsx(j,{color:P,variant:"light",size:"sm",children:b})}),e.jsx(r.Td,{children:e.jsx(s,{size:"sm",c:"dimmed",children:a.notes||"No notes"})})]},a.id)})})]})]})}),e.jsx(G,{isOpen:v,onClose:()=>m(!1),onConfirm:S,title:"Delete Patient",itemName:(i==null?void 0:i.fullName)||"this patient",isLoading:y,additionalMessage:"This will permanently delete the patient and all associated data."})]})}):e.jsxs(h,{pt:20,maw:1232,fluid:!0,children:[e.jsxs(n,{mb:"xl",children:[e.jsx(f,{variant:"subtle",onClick:()=>o("/patients"),size:"lg",children:e.jsx(z,{size:20})}),e.jsx(l,{order:2,children:"Patient Not Found"})]}),e.jsx(x,{radius:"md",p:"xl",withBorder:!0,children:e.jsx(c,{children:e.jsx(s,{c:"dimmed",children:"The requested patient could not be found."})})})]})}export{le as default};
