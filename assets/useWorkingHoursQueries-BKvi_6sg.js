import{aR as tt,b7 as ht,b8 as at,ah as rt,b9 as nt,L as P}from"./index-V7YoHL8v.js";import{a as dt}from"./appointmentService-DVDq4yIi.js";var B={exports:{}},$t=B.exports,st;function mt(){return st||(st=1,function(a,p){(function(d,D){a.exports=D()})($t,function(){var d=1e3,D=6e4,O=36e5,w="millisecond",$="second",b="minute",l="hour",_="day",A="week",W="month",g="quarter",v="year",c="date",n="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,T=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var r=["th","st","nd","rd"],t=i%100;return"["+i+(r[(t-20)%10]||r[t]||r[0])+"]"}},M=function(i,r,t){var s=String(i);return!s||s.length>=r?i:""+Array(r+1-s.length).join(t)+i},C={s:M,z:function(i){var r=-i.utcOffset(),t=Math.abs(r),s=Math.floor(t/60),e=t%60;return(r<=0?"+":"-")+M(s,2,"0")+":"+M(e,2,"0")},m:function i(r,t){if(r.date()<t.date())return-i(t,r);var s=12*(t.year()-r.year())+(t.month()-r.month()),e=r.clone().add(s,W),o=t-e<0,u=r.clone().add(s+(o?-1:1),W);return+(-(s+(t-e)/(o?e-u:u-e))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:W,y:v,w:A,d:_,D:c,h:l,m:b,s:$,ms:w,Q:g}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},k="en",z={};z[k]=x;var F="$isDayjsObject",q=function(i){return i instanceof R||!(!i||!i[F])},L=function i(r,t,s){var e;if(!r)return k;if(typeof r=="string"){var o=r.toLowerCase();z[o]&&(e=o),t&&(z[o]=t,e=o);var u=r.split("-");if(!e&&u.length>1)return i(u[0])}else{var m=r.name;z[m]=r,e=m}return!s&&e&&(k=e),e||!s&&k},y=function(i,r){if(q(i))return i.clone();var t=typeof r=="object"?r:{};return t.date=i,t.args=arguments,new R(t)},f=C;f.l=L,f.i=q,f.w=function(i,r){return y(i,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var R=function(){function i(t){this.$L=L(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[F]=!0}var r=i.prototype;return r.parse=function(t){this.$d=function(s){var e=s.date,o=s.utc;if(e===null)return new Date(NaN);if(f.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var u=e.match(h);if(u){var m=u[2]-1||0,S=(u[7]||"0").substring(0,3);return o?new Date(Date.UTC(u[1],m,u[3]||1,u[4]||0,u[5]||0,u[6]||0,S)):new Date(u[1],m,u[3]||1,u[4]||0,u[5]||0,u[6]||0,S)}}return new Date(e)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return f},r.isValid=function(){return this.$d.toString()!==n},r.isSame=function(t,s){var e=y(t);return this.startOf(s)<=e&&e<=this.endOf(s)},r.isAfter=function(t,s){return y(t)<this.startOf(s)},r.isBefore=function(t,s){return this.endOf(s)<y(t)},r.$g=function(t,s,e){return f.u(t)?this[s]:this.set(e,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,s){var e=this,o=!!f.u(s)||s,u=f.p(t),m=function(j,U){var N=f.w(e.$u?Date.UTC(e.$y,U,j):new Date(e.$y,U,j),e);return o?N:N.endOf(_)},S=function(j,U){return f.w(e.toDate()[j].apply(e.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(U)),e)},H=this.$W,Y=this.$M,E=this.$D,Z="set"+(this.$u?"UTC":"");switch(u){case v:return o?m(1,0):m(31,11);case W:return o?m(1,Y):m(0,Y+1);case A:var I=this.$locale().weekStart||0,Q=(H<I?H+7:H)-I;return m(o?E-Q:E+(6-Q),Y);case _:case c:return S(Z+"Hours",0);case l:return S(Z+"Minutes",1);case b:return S(Z+"Seconds",2);case $:return S(Z+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,s){var e,o=f.p(t),u="set"+(this.$u?"UTC":""),m=(e={},e[_]=u+"Date",e[c]=u+"Date",e[W]=u+"Month",e[v]=u+"FullYear",e[l]=u+"Hours",e[b]=u+"Minutes",e[$]=u+"Seconds",e[w]=u+"Milliseconds",e)[o],S=o===_?this.$D+(s-this.$W):s;if(o===W||o===v){var H=this.clone().set(c,1);H.$d[m](S),H.init(),this.$d=H.set(c,Math.min(this.$D,H.daysInMonth())).$d}else m&&this.$d[m](S);return this.init(),this},r.set=function(t,s){return this.clone().$set(t,s)},r.get=function(t){return this[f.p(t)]()},r.add=function(t,s){var e,o=this;t=Number(t);var u=f.p(s),m=function(Y){var E=y(o);return f.w(E.date(E.date()+Math.round(Y*t)),o)};if(u===W)return this.set(W,this.$M+t);if(u===v)return this.set(v,this.$y+t);if(u===_)return m(1);if(u===A)return m(7);var S=(e={},e[b]=D,e[l]=O,e[$]=d,e)[u]||1,H=this.$d.getTime()+t*S;return f.w(H,this)},r.subtract=function(t,s){return this.add(-1*t,s)},r.format=function(t){var s=this,e=this.$locale();if(!this.isValid())return e.invalidDate||n;var o=t||"YYYY-MM-DDTHH:mm:ssZ",u=f.z(this),m=this.$H,S=this.$m,H=this.$M,Y=e.weekdays,E=e.months,Z=e.meridiem,I=function(U,N,K,V){return U&&(U[N]||U(s,o))||K[N].slice(0,V)},Q=function(U){return f.s(m%12||12,U,"0")},j=Z||function(U,N,K){var V=U<12?"AM":"PM";return K?V.toLowerCase():V};return o.replace(T,function(U,N){return N||function(K){switch(K){case"YY":return String(s.$y).slice(-2);case"YYYY":return f.s(s.$y,4,"0");case"M":return H+1;case"MM":return f.s(H+1,2,"0");case"MMM":return I(e.monthsShort,H,E,3);case"MMMM":return I(E,H);case"D":return s.$D;case"DD":return f.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return I(e.weekdaysMin,s.$W,Y,2);case"ddd":return I(e.weekdaysShort,s.$W,Y,3);case"dddd":return Y[s.$W];case"H":return String(m);case"HH":return f.s(m,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return j(m,S,!0);case"A":return j(m,S,!1);case"m":return String(S);case"mm":return f.s(S,2,"0");case"s":return String(s.$s);case"ss":return f.s(s.$s,2,"0");case"SSS":return f.s(s.$ms,3,"0");case"Z":return u}return null}(U)||u.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,s,e){var o,u=this,m=f.p(s),S=y(t),H=(S.utcOffset()-this.utcOffset())*D,Y=this-S,E=function(){return f.m(u,S)};switch(m){case v:o=E()/12;break;case W:o=E();break;case g:o=E()/3;break;case A:o=(Y-H)/6048e5;break;case _:o=(Y-H)/864e5;break;case l:o=Y/O;break;case b:o=Y/D;break;case $:o=Y/d;break;default:o=Y}return e?o:f.a(o)},r.daysInMonth=function(){return this.endOf(W).$D},r.$locale=function(){return z[this.$L]},r.locale=function(t,s){if(!t)return this.$L;var e=this.clone(),o=L(t,s,!0);return o&&(e.$L=o),e},r.clone=function(){return f.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},i}(),et=R.prototype;return y.prototype=et,[["$ms",w],["$s",$],["$m",b],["$H",l],["$W",_],["$M",W],["$y",v],["$D",c]].forEach(function(i){et[i[1]]=function(r){return this.$g(r,i[0],i[1])}}),y.extend=function(i,r){return i.$i||(i(r,R,y),i.$i=!0),y},y.locale=L,y.isDayjs=q,y.unix=function(i){return y(1e3*i)},y.en=z[k],y.Ls=z,y.p={},y})}(B)),B.exports}var gt=mt();const J=tt(gt);var G={exports:{}},vt=G.exports,it;function yt(){return it||(it=1,function(a,p){(function(d,D){a.exports=D()})(vt,function(){var d="minute",D=/[+-]\d\d(?::?\d\d)?/g,O=/([+-]|\d\d)/g;return function(w,$,b){var l=$.prototype;b.utc=function(n){var h={date:n,utc:!0,args:arguments};return new $(h)},l.utc=function(n){var h=b(this.toDate(),{locale:this.$L,utc:!0});return n?h.add(this.utcOffset(),d):h},l.local=function(){return b(this.toDate(),{locale:this.$L,utc:!1})};var _=l.parse;l.parse=function(n){n.utc&&(this.$u=!0),this.$utils().u(n.$offset)||(this.$offset=n.$offset),_.call(this,n)};var A=l.init;l.init=function(){if(this.$u){var n=this.$d;this.$y=n.getUTCFullYear(),this.$M=n.getUTCMonth(),this.$D=n.getUTCDate(),this.$W=n.getUTCDay(),this.$H=n.getUTCHours(),this.$m=n.getUTCMinutes(),this.$s=n.getUTCSeconds(),this.$ms=n.getUTCMilliseconds()}else A.call(this)};var W=l.utcOffset;l.utcOffset=function(n,h){var T=this.$utils().u;if(T(n))return this.$u?0:T(this.$offset)?W.call(this):this.$offset;if(typeof n=="string"&&(n=function(k){k===void 0&&(k="");var z=k.match(D);if(!z)return null;var F=(""+z[0]).match(O)||["-",0,0],q=F[0],L=60*+F[1]+ +F[2];return L===0?0:q==="+"?L:-L}(n),n===null))return this;var x=Math.abs(n)<=16?60*n:n,M=this;if(h)return M.$offset=x,M.$u=n===0,M;if(n!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(M=this.local().add(x+C,d)).$offset=x,M.$x.$localOffset=C}else M=this.utc();return M};var g=l.format;l.format=function(n){var h=n||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,h)},l.valueOf=function(){var n=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*n},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var v=l.toDate;l.toDate=function(n){return n==="s"&&this.$offset?b(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():v.call(this)};var c=l.diff;l.diff=function(n,h,T){if(n&&this.$u===n.$u)return c.call(this,n,h,T);var x=this.local(),M=b(n).local();return c.call(x,M,h,T)}}})}(G)),G.exports}var pt=yt();const Dt=tt(pt);var X={exports:{}},Mt=X.exports,ot;function wt(){return ot||(ot=1,function(a,p){(function(d,D){a.exports=D()})(Mt,function(){var d={year:0,month:1,day:2,hour:3,minute:4,second:5},D={};return function(O,w,$){var b,l=function(g,v,c){c===void 0&&(c={});var n=new Date(g),h=function(T,x){x===void 0&&(x={});var M=x.timeZoneName||"short",C=T+"|"+M,k=D[C];return k||(k=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:T,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:M}),D[C]=k),k}(v,c);return h.formatToParts(n)},_=function(g,v){for(var c=l(g,v),n=[],h=0;h<c.length;h+=1){var T=c[h],x=T.type,M=T.value,C=d[x];C>=0&&(n[C]=parseInt(M,10))}var k=n[3],z=k===24?0:k,F=n[0]+"-"+n[1]+"-"+n[2]+" "+z+":"+n[4]+":"+n[5]+":000",q=+g;return($.utc(F).valueOf()-(q-=q%1e3))/6e4},A=w.prototype;A.tz=function(g,v){g===void 0&&(g=b);var c,n=this.utcOffset(),h=this.toDate(),T=h.toLocaleString("en-US",{timeZone:g}),x=Math.round((h-new Date(T))/1e3/60),M=15*-Math.round(h.getTimezoneOffset()/15)-x;if(!Number(M))c=this.utcOffset(0,v);else if(c=$(T,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(M,!0),v){var C=c.utcOffset();c=c.add(n-C,"minute")}return c.$x.$timezone=g,c},A.offsetName=function(g){var v=this.$x.$timezone||$.tz.guess(),c=l(this.valueOf(),v,{timeZoneName:g}).find(function(n){return n.type.toLowerCase()==="timezonename"});return c&&c.value};var W=A.startOf;A.startOf=function(g,v){if(!this.$x||!this.$x.$timezone)return W.call(this,g,v);var c=$(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return W.call(c,g,v).tz(this.$x.$timezone,!0)},$.tz=function(g,v,c){var n=c&&v,h=c||v||b,T=_(+$(),h);if(typeof g!="string")return $(g).tz(h);var x=function(z,F,q){var L=z-60*F*1e3,y=_(L,q);if(F===y)return[L,F];var f=_(L-=60*(y-F)*1e3,q);return y===f?[L,y]:[z-60*Math.min(y,f)*1e3,Math.max(y,f)]}($.utc(g,n).valueOf(),T,h),M=x[0],C=x[1],k=$(M).utcOffset(C);return k.$x.$timezone=h,k},$.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},$.tz.setDefault=function(g){b=g}}})}(X)),X.exports}var St=wt();const kt=tt(St);J.extend(Dt);J.extend(kt);const ct=[{day:"Sunday",letter:"S",value:0},{day:"Monday",letter:"M",value:1},{day:"Tuesday",letter:"T",value:2},{day:"Wednesday",letter:"W",value:3},{day:"Thursday",letter:"T",value:4},{day:"Friday",letter:"F",value:5},{day:"Saturday",letter:"S",value:6}],ut=a=>{if(!a||a==="00:00:00")return"";try{const p=J().format("YYYY-MM-DD");return J.utc(`${p} ${a}`).tz(J.tz.guess()).format("HH:mm")}catch(p){return console.error("Error converting UTC to local time:",p),""}},ft=a=>(a==null?void 0:a.startTime)!=="00:00:00"&&(a==null?void 0:a.endTime)!=="00:00:00",Ot=()=>{const a={};return ct.forEach(p=>{a[p.day]={isAvailable:!1,from:"",to:""}}),a},Tt=(a,p)=>{const d=a.find(O=>O.doctorId===Number(p));if(!d)return console.log(`Doctor ${p} not found in API response`),null;if(!d.workingHours||d.workingHours.length===0)return console.log(`Doctor ${d.doctorName} (ID: ${p}) has no working hours set`),d.message&&console.log(`API Message: ${d.message}`),Ot();const D={};return ct.forEach(O=>{const w=d.workingHours.find($=>$.dayOfWeek===O.value);w&&ft(w)?D[O.day]={isAvailable:!0,from:ut(w.startTime),to:ut(w.endTime)}:D[O.day]={isAvailable:!1,from:"",to:""}}),D},xt=a=>{const p={};return a.forEach(d=>{var w;const D=d.doctorId,O=[];((w=d.workingHours)==null?void 0:w.length)>0?d.workingHours.forEach($=>{ft($)&&O.push($.dayOfWeek)}):O.push(0,1,2,3,4,5,6),p[D]=O}),p},lt=()=>dt.getAllDoctorsWorkingHours();function Wt(a){const p=ht(),d=at({queryKey:["working-hours",a],queryFn:async()=>{const w=await lt();return Tt(w,a)},enabled:!!a,onError:w=>{P.show({title:"Error",message:"Failed to load working hours",color:"red"})}}),D=rt({mutationFn:nt.updateDoctorWorkingHours,onSuccess:()=>{p.invalidateQueries({queryKey:["working-hours",a]}),p.invalidateQueries({queryKey:["all-doctors-working-hours"]}),P.show({title:"Success",message:"Working hours updated successfully",color:"green"})},onError:w=>{P.show({title:"Error",message:w.message||"Failed to update working hours",color:"red"})}}),O=rt({mutationFn:nt.createDoctorWorkingHours,onSuccess:()=>{p.invalidateQueries({queryKey:["working-hours",a]}),p.invalidateQueries({queryKey:["all-doctors-working-hours"]}),P.show({title:"Success",message:"Working hours created successfully",color:"green"})},onError:w=>{P.show({title:"Error",message:w.message||"Failed to create working hours",color:"red"})}});return{workingHours:d.data,isLoading:d.isLoading,error:d.error,updateWorkingHours:D.mutate,createWorkingHours:O.mutate,isUpdating:D.isPending,isCreating:O.isPending}}function Yt(){const a=at({queryKey:["all-doctors-working-hours"],queryFn:async()=>{const p=await lt();return xt(p)},staleTime:3e5,onError:p=>{console.error("Error fetching all doctors working hours:",p)}});return{doctorsWorkingDays:a.data||{},isLoading:a.isLoading,error:a.error}}export{ct as D,Dt as a,Wt as b,J as d,kt as t,Yt as u};
