import{r as f,l as ye,m as E,u as R,a as $,c as A,n as X,j as e,U as je,g as M,o as Z,B as N,q as ee,s as T,v as se,w as oe,x as we,y as Se,b as Ie,z as re,f as G,T as z,D as te,e as ae,E as F,d as Pe,F as ze,C as _e,t as Le,H as Te,P as Ve,L as Ee,G as J,J as Re}from"./index-2K_n1FRf.js";import{A as V,I as K,u as Be}from"./useStore-Dh7f2nNL.js";import{u as ne}from"./use-form-DFhBqMe-.js";import{A as ie,P as Fe}from"./PasswordInput-GxtErsSD.js";import{I as Ne}from"./IconMail-b99m0eL5.js";import{I as ce}from"./IconCheck-BTsRsjRA.js";import{g as le}from"./get-auto-contrast-value-Da6zqqWm.js";import{I as Ge,a as $e,b as Ae}from"./InputsGroupFieldset-CJ-DhFAa.js";import{C as de}from"./CheckIcon-D-4r5XSn.js";import"./ActionIcon-pWppweKH.js";const ue=f.createContext(null),Me=ue.Provider,me=()=>f.useContext(ue),[qe,We]=ye();var he={card:"m_26775b0a"};const Oe={withBorder:!0},Ue=A((o,{radius:r})=>({card:{"--card-radius":M(r)}})),q=E((o,r)=>{const s=R("CheckboxCard",Oe,o),{classNames:m,className:c,style:u,styles:n,unstyled:i,vars:a,checked:h,mod:l,withBorder:C,value:t,onClick:d,defaultChecked:v,onChange:x,...y}=s,j=$({name:"CheckboxCard",classes:he,props:s,className:c,style:u,classNames:m,styles:n,unstyled:i,vars:a,varsResolver:Ue,rootSelector:"card"}),p=me(),w=typeof h=="boolean"?h:p?p.value.includes(t||""):void 0,[b,g]=X({value:w,defaultValue:v,finalValue:!1,onChange:x});return e.jsx(qe,{value:{checked:b},children:e.jsx(je,{ref:r,mod:[{"with-border":C,checked:b},l],...j("card"),...y,role:"checkbox","aria-checked":b,onClick:k=>{d==null||d(k),p==null||p.onChange(t||""),g(!b)}})})});q.displayName="@mantine/core/CheckboxCard";q.classes=he;const De={},W=E((o,r)=>{const{value:s,defaultValue:m,onChange:c,size:u,wrapperProps:n,children:i,readOnly:a,...h}=R("CheckboxGroup",De,o),[l,C]=X({value:s,defaultValue:m,finalValue:[],onChange:c}),t=d=>{const v=typeof d=="string"?d:d.currentTarget.value;!a&&C(l.includes(v)?l.filter(x=>x!==v):[...l,v])};return e.jsx(Me,{value:{value:l,onChange:t,size:u},children:e.jsx(Z.Wrapper,{size:u,ref:r,...n,...h,labelElement:"div",__staticSelector:"CheckboxGroup",children:e.jsx(Ge,{role:"group",children:i})})})});W.classes=Z.Wrapper.classes;W.displayName="@mantine/core/CheckboxGroup";var pe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Ye={icon:de},He=A((o,{radius:r,color:s,size:m,iconColor:c,variant:u,autoContrast:n})=>{const i=ee({color:s||o.primaryColor,theme:o}),a=i.isThemeColor&&i.shade===void 0?`var(--mantine-color-${i.color}-outline)`:i.color;return{indicator:{"--checkbox-size":oe(m,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:M(r),"--checkbox-color":u==="outline"?a:T(s,o),"--checkbox-icon-color":c?T(c,o):le(n,o)?se({color:s,theme:o,autoContrast:n}):void 0}}}),O=E((o,r)=>{const s=R("CheckboxIndicator",Ye,o),{classNames:m,className:c,style:u,styles:n,unstyled:i,vars:a,icon:h,indeterminate:l,radius:C,color:t,iconColor:d,autoContrast:v,checked:x,mod:y,variant:j,disabled:p,...w}=s,b=h,g=$({name:"CheckboxIndicator",classes:pe,props:s,className:c,style:u,classNames:m,styles:n,unstyled:i,vars:a,varsResolver:He,rootSelector:"indicator"}),k=We(),B=typeof x=="boolean"||typeof l=="boolean"?x||l:(k==null?void 0:k.checked)||!1;return e.jsx(N,{ref:r,...g("indicator",{variant:j}),variant:j,mod:[{checked:B,disabled:p},y],...w,children:e.jsx(b,{indeterminate:l,...g("icon")})})});O.displayName="@mantine/core/CheckboxIndicator";O.classes=pe;var xe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Je={labelPosition:"right",icon:de},Ke=A((o,{radius:r,color:s,size:m,iconColor:c,variant:u,autoContrast:n})=>{const i=ee({color:s||o.primaryColor,theme:o}),a=i.isThemeColor&&i.shade===void 0?`var(--mantine-color-${i.color}-outline)`:i.color;return{root:{"--checkbox-size":oe(m,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:M(r),"--checkbox-color":u==="outline"?a:T(s,o),"--checkbox-icon-color":c?T(c,o):le(n,o)?se({color:s,theme:o,autoContrast:n}):void 0}}}),P=E((o,r)=>{const s=R("Checkbox",Je,o),{classNames:m,className:c,style:u,styles:n,unstyled:i,vars:a,color:h,label:l,id:C,size:t,radius:d,wrapperProps:v,checked:x,labelPosition:y,description:j,error:p,disabled:w,variant:b,indeterminate:g,icon:k,rootRef:B,iconColor:Xe,onChange:_,autoContrast:Ze,mod:be,...ge}=s,S=me(),fe=t||(S==null?void 0:S.size),Ce=k,L=$({name:"Checkbox",props:s,classes:xe,className:c,style:u,classNames:m,styles:n,unstyled:i,vars:a,varsResolver:Ke}),{styleProps:ve,rest:U}=we(ge),D=Se(C),Y=S?{checked:S.value.includes(U.value),onChange:H=>{S.onChange(H),_==null||_(H)}}:{},ke=f.useRef(null),I=r||ke;return f.useEffect(()=>{I&&"current"in I&&I.current&&(I.current.indeterminate=g||!1)},[g,I]),e.jsx($e,{...L("root"),__staticSelector:"Checkbox",__stylesApiProps:s,id:D,size:fe,labelPosition:y,label:l,description:j,error:p,disabled:w,classNames:m,styles:n,unstyled:i,"data-checked":Y.checked||x||void 0,variant:b,ref:B,mod:be,...ve,...v,children:e.jsxs(N,{...L("inner"),mod:{"data-label-position":y},children:[e.jsx(N,{component:"input",id:D,ref:I,checked:x,disabled:w,mod:{error:!!p,indeterminate:g},...L("input",{focusable:!0,variant:b}),onChange:_,...U,...Y,type:"checkbox"}),e.jsx(Ce,{indeterminate:g,...L("icon")})]})})});P.classes={...xe,...Ae};P.displayName="@mantine/core/Checkbox";P.Group=W;P.Indicator=O;P.Card=q;/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q=Ie("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);const Qe=({onBackToLogin:o})=>{const[r,s]=f.useState(!1),[m,c]=f.useState(!1),{handleForgotPassword:u}=re(),n=ne({initialValues:{email:""},validate:{email:h=>h?/^\S+@\S+$/.test(h)?null:"Invalid email address":"Email is required"}}),i=async h=>{s(!0);try{const l=await u(h.email);l.success?(c(!0),F.show({title:"Success",message:l.message,color:"green",icon:e.jsx(ce,{size:16})}),n.reset()):F.show({title:"Error",message:l.error,color:"red",icon:e.jsx(K,{size:16})})}catch{F.show({title:"Error",message:"An unexpected error occurred. Please try again.",color:"red",icon:e.jsx(K,{size:16})})}s(!1)},a=()=>{c(!1),n.reset(),o()};return m?e.jsxs(G,{children:[e.jsx(ie,{icon:e.jsx(Ne,{size:16}),title:"Email Sent",color:"green",variant:"light",children:"We've sent a new password to your email address. Please check your inbox and use the new password to log in."}),e.jsx(z,{ta:"center",size:"sm",mt:"md",children:e.jsxs(V,{component:"button",type:"button",onClick:a,fw:500,disabled:r,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx(Q,{size:16}),"Back to Login"]})})]}):e.jsx("form",{onSubmit:n.onSubmit(i),children:e.jsxs(G,{children:[e.jsx(te,{required:!0,radius:"md",label:"Email Address",placeholder:"your@email.com",value:n.values.email,onChange:h=>n.setFieldValue("email",h.currentTarget.value),error:n.errors.email,disabled:r,size:"md"}),e.jsx(z,{size:"sm",c:"dimmed",ta:"center",children:"We'll send you a new password to your email address."}),e.jsx(ae,{type:"submit",radius:"xl",fullWidth:!0,loading:r,disabled:!n.values.email,size:"lg",mt:"md",children:"Send New Password"}),e.jsx(z,{ta:"center",size:"sm",mt:"md",children:e.jsxs(V,{component:"button",type:"button",onClick:a,fw:500,disabled:r,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx(Q,{size:16}),"Back to Login"]})})]})})},ds=()=>{const o=Pe(),r=ze(),s=Be(t=>t.isLoading),{handleLogin:m}=re(),[c,u]=f.useState("login"),[n,i]=f.useState(""),a=ne({initialValues:{email:"",password:"",rememberMe:!1},validate:{email:t=>t?/^\S+@\S+$/.test(t)?null:"Invalid email address":"Email is required",password:t=>t?null:"Password is required"}});f.useEffect(()=>{var t;(t=r.state)!=null&&t.message&&(i(r.state.message),r.state.email&&a.setFieldValue("email",r.state.email),o(r.pathname,{replace:!0}))},[r.state,o,a]);const h=async t=>{try{const d=await m({email:t.email,password:t.password,rememberMe:t.rememberMe});if(!(d!=null&&d.success))throw new Error((d==null?void 0:d.error)||"Login failed")}catch(d){console.error("Login error:",d)}},l=()=>{u("forgot-password")},C=()=>{u("login")};return e.jsxs(_e,{w:"100vw",h:"100vh",fluid:!0,bg:Le.backgroundColor,children:[e.jsx(Te,{h:"50"}),e.jsxs(Ve,{withBorder:!0,shadow:"md",radius:"lg",p:"xl",w:"100%",maw:500,mx:"auto",pos:"relative",children:[e.jsx(Ee,{visible:s,overlayProps:{blur:2}}),e.jsx(J,{pb:"md",justify:"center",children:e.jsx(Re,{height:60,width:60,onClick:()=>o("/"),cursor:"pointer"})}),e.jsx(z,{size:"xl",ta:"center",mb:"xl",fw:500,children:c==="login"?"Login to your account":"Reset Your Password"}),n&&e.jsx(ie,{icon:e.jsx(ce,{size:16}),title:"Success",color:"green",variant:"light",mb:"md",withCloseButton:!0,onClose:()=>i(""),children:n}),c==="login"?e.jsx("form",{onSubmit:a.onSubmit(h),children:e.jsxs(G,{gap:"md",children:[e.jsx(te,{required:!0,label:"Email",placeholder:"your@email.com",value:a.values.email,onChange:t=>a.setFieldValue("email",t.currentTarget.value),error:a.errors.email,radius:"md",disabled:s,size:"md"}),e.jsx(Fe,{required:!0,label:"Password",placeholder:"Your password",value:a.values.password,onChange:t=>a.setFieldValue("password",t.currentTarget.value),error:a.errors.password,radius:"md",disabled:s,size:"md"}),e.jsx(P,{label:"Remember me",checked:a.values.rememberMe,onChange:t=>a.setFieldValue("rememberMe",t.currentTarget.checked),disabled:s,size:"sm"}),e.jsx(J,{justify:"flex-end",children:e.jsx(V,{component:"button",type:"button",onClick:l,size:"sm",disabled:s,children:"Forgot Password?"})}),e.jsx(ae,{type:"submit",radius:"xl",fullWidth:!0,loading:s,size:"lg",mt:"md",children:"Sign in"}),e.jsxs(z,{ta:"center",size:"sm",mt:"md",children:["Don't have an account?"," ",e.jsx(V,{component:"button",type:"button",onClick:()=>o("/register"),fw:500,disabled:s,children:"Sign up"})]})]})}):e.jsx(Qe,{onBackToLogin:C})]})]})};export{ds as default};
