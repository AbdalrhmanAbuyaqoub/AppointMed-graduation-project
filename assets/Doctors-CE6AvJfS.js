import{f as I,b as A,g as L,j as e,E as N,k as O,H as B,aB as v,v as M,aC as P,u as w,S as f,aw as R,T as h,G as j,av as W,r as p,am as E,C as G,ag as H,B as y,aD as Q,a as _,t as U,az as Y,aA as $,P as F,aE as V}from"./index-hZ1qAkO8.js";import{u as q,D as J}from"./useWorkingHoursQueries-BuTsGmTl.js";import{T as t}from"./Table-Bjdeg4N3.js";import{A as K}from"./Avatar-BeLdhHzi.js";import"./timezone-kelOehZx.js";var S={root:"m_18320242","skeleton-fade":"m_299c329c"};const X={visible:!0,animate:!0},Z=O((o,{width:n,height:i,radius:a,circle:l})=>({root:{"--skeleton-height":v(i),"--skeleton-width":l?v(i):v(n),"--skeleton-radius":l?"1000px":a===void 0?void 0:B(a)}})),g=I((o,n)=>{const i=A("Skeleton",X,o),{classNames:a,className:l,style:m,styles:r,unstyled:u,vars:c,width:s,height:d,circle:k,visible:C,radius:D,animate:x,mod:T,...b}=i,z=L({name:"Skeleton",classes:S,props:i,className:l,style:m,classNames:a,styles:r,unstyled:u,vars:c,varsResolver:Z});return e.jsx(N,{ref:n,...z("root"),mod:[{visible:C,animate:x},T],...b})});g.classes=S;g.displayName="@mantine/core/Skeleton";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee=M("outline","user-off","IconUserOff",[["path",{d:"M8.18 8.189a4.01 4.01 0 0 0 2.616 2.627m3.507 -.545a4 4 0 1 0 -5.59 -5.552",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4c.412 0 .81 .062 1.183 .178m2.633 2.618c.12 .38 .184 .785 .184 1.204v2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);function se({doctorId:o,workingDays:n}){return e.jsx(j,{gap:"8",children:J.map(i=>{const a=n.includes(i.value);return e.jsx(N,{bg:a?"violet":"gray.4",fw:500,p:4,h:24,w:24,style:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},title:i.day,children:e.jsx(h,{size:"xs",fw:500,c:"white",children:i.letter})},i.value)})})}function re({searchQuery:o=""}){const{doctors:n,isLoading:i}=P(),{doctorsWorkingDays:a,isLoading:l}=q(),m=w(),r=s=>{m(`/doctors/${s}`)},u=s=>{m(`/clinics/${s}`)},c=n.filter(s=>{const d=o.toLowerCase();return s.name.toLowerCase().includes(d)||s.clinicName.toLowerCase().includes(d)});return i||l?e.jsxs(f,{children:[e.jsx(g,{height:40,radius:"sm"}),[1,2,3].map(s=>e.jsx(g,{height:50,radius:"sm",mt:"sm"},s))]}):e.jsx(f,{gap:0,children:e.jsxs(t,{highlightOnHover:!0,verticalSpacing:"sm",horizontalSpacing:"lg",children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{c:"dimmed",children:"Name"}),e.jsx(t.Th,{c:"dimmed",children:"Working Days"}),e.jsx(t.Th,{c:"dimmed",children:"Clinic"})]})}),e.jsx(t.Tbody,{children:c.length===0?e.jsx(t.Tr,{children:e.jsx(t.Td,{colSpan:3,children:e.jsx(R,{py:"xl",children:e.jsxs(f,{align:"center",gap:"md",children:[e.jsx(ee,{size:30,opacity:.4}),e.jsx(h,{size:"sm",c:"dimmed",children:"No doctors found"})]})})})}):c.map(s=>e.jsxs(t.Tr,{style:{cursor:"pointer"},onClick:()=>r(s.id),children:[e.jsx(t.Td,{children:e.jsxs(j,{gap:"sm",children:[e.jsx(K,{style:{cursor:"pointer"},onClick:()=>r(s.id),size:"md",radius:"xl",variant:"filled",children:e.jsx(h,{fz:"sm",fw:600,c:"white",children:s.name.split(" ").map(d=>d[0]).join("").toUpperCase()})}),e.jsx(h,{size:"sm",fw:600,style:{cursor:"pointer"},onClick:()=>r(s.id),children:s.name})]})}),e.jsx(t.Td,{children:e.jsx(se,{doctorId:s.id,workingDays:a[s.id]||[]})}),e.jsx(t.Td,{children:e.jsx(W,{variant:"light",size:"lg",radius:"sm",px:"md",style:{cursor:"pointer"},onClick:()=>u(s.clinicId),children:s.clinicName})})]},s.id))})]})})}function oe(){const[o,n]=p.useState(!1),[i,a]=p.useState(!1),[l,m]=p.useState(""),[r,u]=p.useState({firstName:"",lastName:"",email:"",address:"",phoneNumber:"",selectedClinic:""}),{clinics:c,addDoctor:s,isAddingDoctor:d}=E(),k=w(),C=()=>{!c||c.length===0?a(!0):n(!0)},D=async()=>{if(r.firstName.trim()&&r.lastName.trim()&&r.email.trim()&&r.phoneNumber.trim())try{await s({clinicId:parseInt(r.selectedClinic),firstName:r.firstName.trim(),lastName:r.lastName.trim(),email:r.email.trim(),address:r.address.trim(),phoneNumber:r.phoneNumber.trim()}),u({firstName:"",lastName:"",email:"",address:"",phoneNumber:"",selectedClinic:""}),n(!1)}catch(x){console.error("Error adding doctor:",x)}};return e.jsxs(G,{pt:12,maw:1232,fluid:!0,children:[e.jsxs(H,{title:e.jsx(h,{fz:"lg",fw:700,children:"There is no Clinics"}),radius:"md",closeButtonProps:{radius:"xl"},centered:!0,opened:i,onClose:()=>a(!1),size:"md",children:[e.jsx(h,{fz:"sm",children:"You must create at least one clinic before adding a doctor."}),e.jsxs(j,{justify:"end",mt:"xl",children:[e.jsx(y,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(y,{bg:Q.primaryColor,variant:"filled",onClick:()=>k("/clinics"),children:"Go to Clinics"})]})]}),e.jsxs(f,{children:[e.jsx(_,{fz:"24px",order:2,children:"Doctors"}),e.jsxs(j,{mt:40,justify:"space-between",children:[e.jsx(U,{size:"lg",placeholder:"Search doctors...",value:l,onChange:x=>m(x.target.value),leftSection:e.jsx(Y,{size:16}),style:{flex:1,maxWidth:300},radius:"md"}),e.jsx(y,{size:"lg",variant:"outline",leftSection:e.jsx($,{size:20}),onClick:C,radius:"xl",children:"Add New Doctor"})]}),e.jsx(F,{radius:"md",withBorder:!0,children:e.jsx(re,{searchQuery:l})}),e.jsx(V,{opened:o,onClose:()=>n(!1),onSubmit:D,doctorData:r,setDoctorData:u,isLoading:d})]})]})}export{oe as default};
