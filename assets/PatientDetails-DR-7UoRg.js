import{b as e,aC as s,d as i,O as r,r as n,j as a,C as d,L as l,G as t,P as o,h as c,T as m,f as h,a2 as x,a3 as j,e as p,aa as u}from"./index-C5KYdp5U.js";import{u as g}from"./useUserQueries-BpHpyw91.js";import{u as f}from"./useAppointmentQueries-CJz8SyLb.js";import{D as z}from"./DeleteConfirmationModal-BPSZsLlD.js";import{A as v}from"./ActionIcon-Dw2MUdTV.js";import{I as T}from"./IconArrowLeft-BqmQ3r1Z.js";import{T as y}from"./Title-D_QTtZYm.js";import{B as w}from"./Badge-l_gCooFk.js";import{I as N,a as D}from"./IconTrash-D1Ijcu5u.js";import{D as C}from"./Divider-eQPCNDRY.js";import{I}from"./IconMail-BL6ruXOu.js";import{I as A}from"./IconMapPin-D2NovyR1.js";import{I as b}from"./IconCalendar-Ctd0oLqK.js";import{T as S}from"./Table-CMPngtyv.js";import"./useQuery-DQjSWo45.js";import"./useMutation-CFmdAs2Y.js";import"./appointmentService-CR1iLHbm.js";
/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k=e("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),B=e("outline","user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);
/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const M={0:"Scheduled",1:"Cancelled",2:"Completed",3:"No Show"},L={0:"blue",1:"red",2:"green",3:"orange"};function P(){const{id:e}=s(),P=i();r();const[U,E]=n.useState(!1),{patients:F,isLoading:H,deleteAccount:O,isDeletingAccount:Q}=g(),{getAppointmentsByUser:q}=f(),G=F.find(s=>s.id===e),{data:J=[],isLoading:V,error:K}=q(e);return H||V?a.jsx(d,{pt:20,maw:1232,fluid:!0,children:a.jsx(l,{visible:!0})}):G?a.jsxs(d,{pt:20,maw:1232,fluid:!0,children:[a.jsxs(t,{mb:"xl",children:[a.jsx(v,{hiddenFrom:"sm",variant:"subtle",onClick:()=>P("/patients"),size:"lg",children:a.jsx(T,{size:20})}),a.jsx(y,{order:2,children:"Patient Details"})]}),a.jsx(o,{p:"xl",radius:"md",withBorder:!0,maw:1232,children:a.jsxs(h,{gap:"xl",children:[a.jsxs(t,{gap:"xl",align:"flex-start",children:[a.jsx(x,{size:"xl",radius:"50%",variant:"filled",color:"gray.3",children:a.jsx(m,{fz:30,children:j({fullName:G.fullName})})}),a.jsxs(h,{gap:"xs",style:{flex:1},children:[a.jsx(y,{order:2,fz:28,children:G.fullName}),a.jsxs(t,{gap:"md",children:[a.jsx(w,{size:"lg",variant:"filled",color:"blue",children:"PATIENT"}),a.jsx(w,{variant:"filled",size:"lg",color:G.isBanned?"red":"green",children:G.isBanned?"BANNED":"ACTIVE"})]})]}),a.jsx(p,{variant:"outline",color:"red",leftSection:a.jsx(N,{size:16}),onClick:()=>E(!0),radius:"md",size:"sm",children:"Delete Patient"})]}),a.jsx(C,{}),a.jsxs(t,{cols:{base:1,sm:2},gap:"xl",children:[a.jsxs(h,{gap:"md",children:[a.jsx(y,{order:3,size:"h4",children:"Basic Information"}),a.jsxs(t,{gap:"md",children:[a.jsx(u,{size:20,color:"var(--mantine-color-gray-6)"}),a.jsx(m,{size:"sm",fw:500,children:"Full Name:"}),a.jsx(m,{size:"sm",children:G.fullName})]}),a.jsxs(t,{gap:"md",children:[a.jsx(I,{size:20,color:"var(--mantine-color-gray-6)"}),a.jsx(m,{size:"sm",fw:500,children:"Email:"}),a.jsx(m,{size:"sm",children:G.email})]}),a.jsxs(t,{gap:"md",children:[a.jsx(B,{size:20,color:"var(--mantine-color-gray-6)"}),a.jsx(m,{size:"sm",fw:500,children:"Status:"}),a.jsx(m,{size:"sm",children:G.isBanned?"Banned":"Active"})]})]}),a.jsxs(h,{gap:"md",children:[a.jsx(y,{order:3,size:"h4",children:"Contact Information"}),a.jsxs(t,{gap:"md",children:[a.jsx(D,{size:20,color:"var(--mantine-color-gray-6)"}),a.jsx(m,{size:"sm",fw:500,children:"Phone:"}),a.jsx(m,{size:"sm",children:G.phoneNumber||"Not provided"})]}),a.jsxs(t,{gap:"md",children:[a.jsx(A,{size:20,color:"var(--mantine-color-gray-6)"}),a.jsx(m,{size:"sm",fw:500,children:"Address:"}),a.jsx(m,{size:"sm",children:G.address||"Not provided"})]})]})]})]})}),a.jsx(o,{p:"xl",mt:"xl",radius:"md",withBorder:!0,maw:1232,children:a.jsxs(h,{gap:"xl",children:[a.jsxs(t,{justify:"space-between",align:"center",children:[a.jsx(y,{order:3,children:"Appointment History"}),a.jsxs(t,{gap:"xs",children:[a.jsx(b,{size:20,color:"var(--mantine-color-gray-6)"}),a.jsxs(m,{size:"sm",c:"dimmed",children:[J.length," appointment",1!==J.length?"s":""]})]})]}),K?a.jsx(c,{py:"xl",children:a.jsxs(m,{c:"red",children:["Error loading appointments: ",K.message]})}):0===J.length?a.jsx(c,{py:"xl",children:a.jsxs(h,{align:"center",gap:"md",children:[a.jsx(b,{size:48,opacity:.4}),a.jsx(m,{size:"lg",c:"dimmed",children:"No appointments found"}),a.jsx(m,{size:"sm",c:"dimmed",children:"This patient has no scheduled appointments."})]})}):a.jsxs(S,{highlightOnHover:!0,verticalSpacing:"sm",children:[a.jsx(S.Thead,{children:a.jsxs(S.Tr,{children:[a.jsx(S.Th,{c:"dimmed",children:"Date & Time"}),a.jsx(S.Th,{c:"dimmed",children:"Doctor"}),a.jsx(S.Th,{c:"dimmed",children:"Clinic"}),a.jsx(S.Th,{c:"dimmed",children:"Status"}),a.jsx(S.Th,{c:"dimmed",children:"Notes"})]})}),a.jsx(S.Tbody,{children:J.map(e=>{var s;const i=M[e.status]||"Scheduled",r=L[e.status]||"blue";return a.jsxs(S.Tr,{children:[a.jsx(S.Td,{children:a.jsxs(t,{gap:"xs",children:[a.jsx(k,{size:16,opacity:.6}),a.jsxs(h,{gap:"0",children:[a.jsx(m,{size:"sm",fw:500,children:new Date(e.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),a.jsxs(m,{size:"xs",c:"dimmed",children:[new Date(e.startDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})," ","-"," ",new Date(e.endDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})}),a.jsx(S.Td,{children:a.jsx(m,{size:"sm",fw:500,children:(null==(s=e.doctor)?void 0:s.name)||"N/A"})}),a.jsx(S.Td,{children:a.jsx(m,{size:"sm",c:"dimmed",children:e.clinicName||"N/A"})}),a.jsx(S.Td,{children:a.jsx(w,{color:r,variant:"light",size:"sm",children:i})}),a.jsx(S.Td,{children:a.jsx(m,{size:"sm",c:"dimmed",children:e.notes||"No notes"})})]},e.id)})})]})]})}),a.jsx(z,{isOpen:U,onClose:()=>E(!1),onConfirm:()=>{G&&(O({email:G.email,id:G.id}),E(!1),P("/patients"))},title:"Delete Patient",itemName:(null==G?void 0:G.fullName)||"this patient",isLoading:Q,additionalMessage:"This will permanently delete the patient and all associated data."})]}):a.jsxs(d,{pt:20,maw:1232,fluid:!0,children:[a.jsxs(t,{mb:"xl",children:[a.jsx(v,{variant:"subtle",onClick:()=>P("/patients"),size:"lg",children:a.jsx(T,{size:20})}),a.jsx(y,{order:2,children:"Patient Not Found"})]}),a.jsx(o,{radius:"md",p:"xl",withBorder:!0,children:a.jsx(c,{children:a.jsx(m,{c:"dimmed",children:"The requested patient could not be found."})})})]})}export{P as default};
