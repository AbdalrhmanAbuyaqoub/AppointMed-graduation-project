import{r as e,m as s,u as i,n as a,j as r,o as l,a as n,x as t,y as c,B as d,c as o,s as h,w as u,g as m,d as p,f as x,h as j,T as b,G as f,a3 as w,a4 as g,ao as v,C as y,P as C}from"./index-DbEKal5d.js";import{u as T}from"./useUserQueries-BTFbrwAF.js";import{S as k,I as z}from"./IconUserOff-C1CzPpSU.js";import{T as N}from"./Table-CmdGb5B5.js";import{I as P,a as S,b as _}from"./InputsGroupFieldset-CzRzBvcT.js";import{T as L}from"./Title-CFcNY-rT.js";import"./useQuery-DzRLwVkj.js";import"./useMutation-CdDHAm4w.js";const B=e.createContext(null),I=B.Provider,G={},Q=s((e,s)=>{const{value:n,defaultValue:t,onChange:c,size:d,wrapperProps:o,children:h,readOnly:u,...m}=i("SwitchGroup",G,e),[p,x]=a({value:n,defaultValue:t,finalValue:[],onChange:c});return r.jsx(I,{value:{value:p,onChange:e=>{const s=e.currentTarget.value;!u&&x(p.includes(s)?p.filter(e=>e!==s):[...p,s])},size:d},children:r.jsx(l.Wrapper,{size:d,ref:s,...o,...m,labelElement:"div",__staticSelector:"SwitchGroup",children:r.jsx(P,{role:"group",children:h})})})});Q.classes=l.Wrapper.classes,Q.displayName="@mantine/core/SwitchGroup";var V={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const E={labelPosition:"right",withThumbIndicator:!0},A=o((e,{radius:s,color:i,size:a})=>({root:{"--switch-radius":void 0===s?void 0:m(s),"--switch-height":u(a,"switch-height"),"--switch-width":u(a,"switch-width"),"--switch-thumb-size":u(a,"switch-thumb-size"),"--switch-label-font-size":u(a,"switch-label-font-size"),"--switch-track-label-padding":u(a,"switch-track-label-padding"),"--switch-color":i?h(i,e):void 0}})),O=s((s,l)=>{const o=i("Switch",E,s),{classNames:h,className:u,style:m,styles:p,unstyled:x,vars:j,color:b,label:f,offLabel:w,onLabel:g,id:v,size:y,radius:C,wrapperProps:T,thumbIcon:k,checked:z,defaultChecked:N,onChange:P,labelPosition:_,description:L,error:I,disabled:G,variant:Q,rootRef:O,mod:F,withThumbIndicator:R,...U}=o,W=e.useContext(B),H=y||(null==W?void 0:W.size),M=n({name:"Switch",props:o,classes:V,className:u,style:m,classNames:h,styles:p,unstyled:x,vars:j,varsResolver:A}),{styleProps:$,rest:q}=t(U),D=c(v),J=W?{checked:W.value.includes(q.value),onChange:W.onChange}:{},[K,X]=a({value:J.checked??z,defaultValue:N,finalValue:!1});return r.jsxs(S,{...M("root"),__staticSelector:"Switch",__stylesApiProps:o,id:D,size:H,labelPosition:_,label:f,description:L,error:I,disabled:G,bodyElement:"label",labelElement:"span",classNames:h,styles:p,unstyled:x,"data-checked":J.checked||z||void 0,variant:Q,ref:O,mod:F,...$,...T,children:[r.jsx("input",{...q,disabled:G,checked:K,"data-checked":J.checked||z||void 0,onChange:e=>{var s;W?null==(s=J.onChange)||s.call(J,e):null==P||P(e),X(e.currentTarget.checked)},id:D,ref:l,type:"checkbox",role:"switch",...M("input")}),r.jsxs(d,{"aria-hidden":"true",mod:{error:I,"label-position":_,"without-labels":!g&&!w},...M("track"),children:[r.jsx(d,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":R&&!k},...M("thumb"),children:k}),r.jsx("span",{...M("trackLabel"),children:K?g:w})]})]})});function F({searchQuery:e=""}){const{patients:s,isLoading:i,banPatient:a,unbanPatient:l}=T(),n=p(),t=e=>{n(`/patients/${e}`)},c=s.filter(s=>{const i=e.toLowerCase();return s.fullName.toLowerCase().includes(i)||s.email.toLowerCase().includes(i)||s.phoneNumber&&s.phoneNumber.toLowerCase().includes(i)||s.address&&s.address.toLowerCase().includes(i)});return i?r.jsxs(x,{children:[r.jsx(k,{height:40,radius:"sm"}),[1,2,3].map(e=>r.jsx(k,{height:50,radius:"sm",mt:"sm"},e))]}):r.jsxs(N,{highlightOnHover:!0,verticalSpacing:"sm",horizontalSpacing:"lg",children:[r.jsx(N.Thead,{children:r.jsxs(N.Tr,{children:[r.jsx(N.Th,{c:"dimmed",children:"Name"}),r.jsx(N.Th,{c:"dimmed",children:"Email"}),r.jsx(N.Th,{c:"dimmed",children:"Phone"}),r.jsx(N.Th,{c:"dimmed",children:"Status"})]})}),r.jsx(N.Tbody,{children:0===c.length?r.jsx(N.Tr,{children:r.jsx(N.Td,{colSpan:4,children:r.jsx(j,{py:"xl",children:r.jsxs(x,{align:"center",gap:"md",children:[r.jsx(z,{size:30,opacity:.4}),r.jsx(b,{size:"sm",c:"dimmed",children:0===s.length?"No patients found":"No patients match your search"})]})})})}):c.map(e=>r.jsxs(N.Tr,{style:{cursor:"pointer"},onClick:()=>t(e.id),children:[r.jsx(N.Td,{children:r.jsxs(f,{gap:"sm",children:[r.jsx(w,{color:"#e7edf6",style:{cursor:"pointer"},onClick:()=>t(e.id),size:"md",radius:"xl",variant:"filled",children:r.jsx(b,{fz:"sm",children:g({fullName:e.fullName})})}),r.jsx(b,{size:"sm",fw:600,style:{cursor:"pointer"},onClick:()=>t(e.id),children:e.fullName})]})}),r.jsx(N.Td,{children:r.jsx(b,{size:"sm",c:"dimmed",children:e.email})}),r.jsx(N.Td,{children:r.jsx(b,{size:"sm",c:"dimmed",children:e.phoneNumber||"N/A"})}),r.jsx(N.Td,{children:r.jsxs(f,{gap:"xs",align:"center",onClick:e=>e.stopPropagation(),children:[r.jsx(O,{checked:!e.isBanned,onChange:()=>{return s=e.id,void(e.isBanned?l(s):a(s));var s},color:"green",size:"sm"}),r.jsx(b,{size:"xs",c:e.isBanned?"red":"dimmed",children:e.isBanned?"Banned":"Active"})]})})]},e.id))})]})}function R(){const{searchQuery:e}=v();return r.jsx(y,{pt:12,maw:1232,fluid:!0,children:r.jsxs(x,{children:[r.jsx(L,{fz:"24px",order:2,children:"Patients"}),r.jsx(C,{mt:40,radius:"md",withBorder:!0,children:r.jsx(F,{searchQuery:e})})]})})}O.classes={...V,..._},O.displayName="@mantine/core/Switch",O.Group=Q;export{R as default};
