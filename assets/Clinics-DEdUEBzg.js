import{d as s,aA as e,j as i,k as r,f as n,G as l,aB as a,T as t,e as o,r as c,an as d,D as m,ao as x,C as j,L as h,h as u,I as f}from"./index-DbEKal5d.js";import{T as g}from"./Title-CFcNY-rT.js";import{I as p}from"./IconCalendar-E1NBh4Ho.js";import{B as C}from"./Badge-BIiM0XzC.js";import{u as w}from"./useClinicQueries-8PpHHGmv.js";import{I as v}from"./IconPlus-CYMif05s.js";import{D as z}from"./Divider-DZ5C-WQo.js";import{S as y}from"./SimpleGrid-DgTM9OXm.js";import"./useQuery-DzRLwVkj.js";import"./useMutation-CdDHAm4w.js";import"./get-base-value-D7dq2aJJ.js";function b({clinic:c}){var d,m;const x=s(),{hovered:j,ref:h}=e();return i.jsx(r,{ref:h,padding:"lg",radius:"md",withBorder:!0,style:{transform:j?"translateY(-3px)":"none",transition:"transform 0.1s, box-shadow 0.1s"},children:i.jsxs(n,{gap:"xs",children:[i.jsx(g,{order:3,size:"xl",children:c.name}),i.jsxs(l,{gap:"xs",children:[i.jsx(a,{size:18}),i.jsxs(t,{size:"sm",c:"dimmed",fw:500,children:[(null==(d=c.doctors)?void 0:d.length)||0," ",(null==(m=c.doctors)?void 0:m.length)&&1!==c.doctors.length?"Doctors":"Doctor"]})]}),c.workingHours&&i.jsxs(l,{gap:"xs",children:[i.jsx(p,{size:18}),i.jsx(t,{size:"sm",c:"dimmed",fw:500,children:c.workingHours})]}),c.specialties&&c.specialties.length>0&&i.jsx(l,{gap:"xs",mt:"xs",children:c.specialties.map(s=>i.jsx(C,{variant:"light",children:s},s))}),i.jsx(o,{variant:"light",fullWidth:!0,mt:"xl",radius:"md",onClick:()=>x(`/clinics/${c.id}`),children:"Manage Clinic"})]})})}function k({opened:s,onClose:e}){const[r,n]=c.useState(""),[a,x]=c.useState(!1),{createClinic:j,isCreating:h}=w(),u=()=>{n(""),x(!1),e()};return i.jsx(d,{xOffset:{m:200},centered:!0,withOverlay:!1,opened:s,onClose:u,title:i.jsx(t,{fz:"lg",fw:700,children:"Create New Clinic"}),size:"md",radius:"md",children:i.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),r.trim())try{await j({name:r.trim()}),n(""),x(!1),e()}catch(i){}else x(!0)},children:[i.jsx(m,{labelProps:{ml:4,fz:"md"},label:"Clinic Name",placeholder:"eg. Heart Clinic",value:r,onChange:s=>{n(s.target.value),a&&x(!1)},withAsterisk:!0,error:a?"Clinic name is required":null,size:"md"}),i.jsxs(l,{justify:"flex-end",mt:"xl",children:[i.jsx(o,{variant:"outline",onClick:u,children:"Cancel"}),i.jsx(o,{type:"submit",loading:h,children:"Create Clinic"})]})]})})}function S(){const[s,e]=c.useState(!1),{searchQuery:r}=x(),{clinics:a=[],isLoading:d,isError:m,error:p}=w(),C=a.filter(s=>s.name.toLowerCase().includes(r.toLowerCase()));if(m)return i.jsx(j,{children:i.jsxs(t,{c:"red",children:["Error: ",(null==p?void 0:p.message)||"An error occurred"]})});if(d)return i.jsxs(j,{children:[i.jsx(h,{visible:!0}),i.jsx(t,{children:"Loading clinics..."})]});const S=s=>i.jsx(u,{children:i.jsxs(n,{align:"center",gap:"md",children:[i.jsx(f,{size:50,opacity:.4}),i.jsx(t,{size:"lg",fw:400,c:"dimmed",children:s})]})});return i.jsxs(j,{pt:12,maw:1232,fluid:!0,children:[i.jsxs(n,{children:[i.jsx(g,{fz:"24px",fw:700,order:2,children:"Clinics Management"}),i.jsx(l,{mt:40,justify:"flex-end",children:i.jsx(o,{size:"lg",radius:"xl",variant:"outline",leftSection:i.jsx(v,{size:20}),onClick:()=>e(!0),children:"New Clinic"})}),i.jsx(z,{}),a&&0!==a.length?0===C.length?S("No clinics found matching your search."):i.jsx(y,{cols:{base:1,sm:2,md:2,lg:3},spacing:"xl",children:C.map(s=>i.jsx(b,{clinic:s,doctors:s.doctors},s.id))}):S("No clinics found.")]}),i.jsx(k,{opened:s,onClose:()=>e(!1)})]})}export{S as default};
