import{r as O,m as Q,u as W,n as $,j as e,o as F,a as ie,x as ae,y as ne,B as R,c as ce,s as oe,w as g,g as le,d as de,f as y,h as he,T as p,G as A,a3 as ue,a4 as me,ao as pe,C as xe,P as je}from"./index-2K_n1FRf.js";import{u as fe}from"./useUserQueries-CANe7j8e.js";import{S as U,I as ge}from"./IconUserOff-DyKBPwe3.js";import{T as t}from"./Table-DYjjwA0n.js";import{I as we,a as be,b as Ce}from"./InputsGroupFieldset-CJ-DhFAa.js";import{T as Se}from"./Title-Clypw5uz.js";import"./useQuery-CVFAupRI.js";import"./useMutation-BDHTUPci.js";const H=O.createContext(null),ve=H.Provider,Te=()=>O.useContext(H),ke={},P=Q((n,c)=>{const{value:a,defaultValue:i,onChange:x,size:d,wrapperProps:o,children:h,readOnly:u,...s}=W("SwitchGroup",ke,n),[r,w]=$({value:a,defaultValue:i,finalValue:[],onChange:x}),b=S=>{const j=S.currentTarget.value;!u&&w(r.includes(j)?r.filter(z=>z!==j):[...r,j])};return e.jsx(ve,{value:{value:r,onChange:b,size:d},children:e.jsx(F.Wrapper,{size:d,ref:c,...o,...s,labelElement:"div",__staticSelector:"SwitchGroup",children:e.jsx(we,{role:"group",children:h})})})});P.classes=F.Wrapper.classes;P.displayName="@mantine/core/SwitchGroup";var q={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const ye={labelPosition:"right",withThumbIndicator:!0},Pe=ce((n,{radius:c,color:a,size:i})=>({root:{"--switch-radius":c===void 0?void 0:le(c),"--switch-height":g(i,"switch-height"),"--switch-width":g(i,"switch-width"),"--switch-thumb-size":g(i,"switch-thumb-size"),"--switch-label-font-size":g(i,"switch-label-font-size"),"--switch-track-label-padding":g(i,"switch-track-label-padding"),"--switch-color":a?oe(a,n):void 0}})),C=Q((n,c)=>{const a=W("Switch",ye,n),{classNames:i,className:x,style:d,styles:o,unstyled:h,vars:u,color:s,label:r,offLabel:w,onLabel:b,id:S,size:j,radius:z,wrapperProps:D,thumbIcon:N,checked:v,defaultChecked:J,onChange:T,labelPosition:_,description:K,error:I,disabled:G,variant:M,rootRef:X,mod:Y,withThumbIndicator:Z,...ee}=a,l=Te(),se=j||(l==null?void 0:l.size),f=ie({name:"Switch",props:a,classes:q,className:x,style:d,classNames:i,styles:o,unstyled:h,vars:u,varsResolver:Pe}),{styleProps:re,rest:L}=ae(ee),B=ne(S),m=l?{checked:l.value.includes(L.value),onChange:l.onChange}:{},[V,te]=$({value:m.checked??v,defaultValue:J,finalValue:!1});return e.jsxs(be,{...f("root"),__staticSelector:"Switch",__stylesApiProps:a,id:B,size:se,labelPosition:_,label:r,description:K,error:I,disabled:G,bodyElement:"label",labelElement:"span",classNames:i,styles:o,unstyled:h,"data-checked":m.checked||v||void 0,variant:M,ref:X,mod:Y,...re,...D,children:[e.jsx("input",{...L,disabled:G,checked:V,"data-checked":m.checked||v||void 0,onChange:k=>{var E;l?(E=m.onChange)==null||E.call(m,k):T==null||T(k),te(k.currentTarget.checked)},id:B,ref:c,type:"checkbox",role:"switch",...f("input")}),e.jsxs(R,{"aria-hidden":"true",mod:{error:I,"label-position":_,"without-labels":!b&&!w},...f("track"),children:[e.jsx(R,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":Z&&!N},...f("thumb"),children:N}),e.jsx("span",{...f("trackLabel"),children:V?b:w})]})]})});C.classes={...q,...Ce};C.displayName="@mantine/core/Switch";C.Group=P;function ze({searchQuery:n=""}){const{patients:c,isLoading:a,banPatient:i,unbanPatient:x}=fe(),d=de(),o=s=>{d(`/patients/${s}`)},h=(s,r)=>{r?x(s):i(s)},u=c.filter(s=>{const r=n.toLowerCase();return s.fullName.toLowerCase().includes(r)||s.email.toLowerCase().includes(r)||s.phoneNumber&&s.phoneNumber.toLowerCase().includes(r)||s.address&&s.address.toLowerCase().includes(r)});return a?e.jsxs(y,{children:[e.jsx(U,{height:40,radius:"sm"}),[1,2,3].map(s=>e.jsx(U,{height:50,radius:"sm",mt:"sm"},s))]}):e.jsxs(t,{highlightOnHover:!0,verticalSpacing:"sm",horizontalSpacing:"lg",children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{c:"dimmed",children:"Name"}),e.jsx(t.Th,{c:"dimmed",children:"Email"}),e.jsx(t.Th,{c:"dimmed",children:"Phone"}),e.jsx(t.Th,{c:"dimmed",children:"Status"})]})}),e.jsx(t.Tbody,{children:u.length===0?e.jsx(t.Tr,{children:e.jsx(t.Td,{colSpan:4,children:e.jsx(he,{py:"xl",children:e.jsxs(y,{align:"center",gap:"md",children:[e.jsx(ge,{size:30,opacity:.4}),e.jsx(p,{size:"sm",c:"dimmed",children:c.length===0?"No patients found":"No patients match your search"})]})})})}):u.map(s=>e.jsxs(t.Tr,{style:{cursor:"pointer"},onClick:()=>o(s.id),children:[e.jsx(t.Td,{children:e.jsxs(A,{gap:"sm",children:[e.jsx(ue,{color:"#e7edf6",style:{cursor:"pointer"},onClick:()=>o(s.id),size:"md",radius:"xl",variant:"filled",children:e.jsx(p,{fz:"sm",children:me({fullName:s.fullName})})}),e.jsx(p,{size:"sm",fw:600,style:{cursor:"pointer"},onClick:()=>o(s.id),children:s.fullName})]})}),e.jsx(t.Td,{children:e.jsx(p,{size:"sm",c:"dimmed",children:s.email})}),e.jsx(t.Td,{children:e.jsx(p,{size:"sm",c:"dimmed",children:s.phoneNumber||"N/A"})}),e.jsx(t.Td,{children:e.jsxs(A,{gap:"xs",align:"center",onClick:r=>r.stopPropagation(),children:[e.jsx(C,{checked:!s.isBanned,onChange:()=>h(s.id,s.isBanned),color:"green",size:"sm"}),e.jsx(p,{size:"xs",c:s.isBanned?"red":"dimmed",children:s.isBanned?"Banned":"Active"})]})})]},s.id))})]})}function Re(){const{searchQuery:n}=pe();return e.jsx(xe,{pt:12,maw:1232,fluid:!0,children:e.jsxs(y,{children:[e.jsx(Se,{fz:"24px",order:2,children:"Patients"}),e.jsx(je,{mt:40,radius:"md",withBorder:!0,children:e.jsx(ze,{searchQuery:n})})]})})}export{Re as default};
