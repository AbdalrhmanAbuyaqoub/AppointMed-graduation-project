import{r as O,m as Q,u as W,n as $,j as e,o as F,a as re,x as ae,y as ne,B as R,c as ce,s as oe,w as g,g as le,d as de,f as P,h as he,T as p,G as y,a3 as ue,a4 as me,ap as pe,C as xe,e as je,P as fe}from"./index-DFVxnAOD.js";import{u as ge}from"./useUserQueries-C1VgiVkc.js";import{S as U,I as we}from"./IconUserOff-DoWrofSG.js";import{T as i}from"./Table-hyCBFR01.js";import{I as be,a as Ce,b as ke}from"./InputsGroupFieldset-CNG3XaXO.js";import{T as Se}from"./Title-Dkvllgxu.js";import{I as ve}from"./IconPlus-DGgkmvZO.js";import"./useQuery-CnVbtgMZ.js";import"./useMutation-C_c6qR0s.js";const H=O.createContext(null),Te=H.Provider,Pe=()=>O.useContext(H),ye={},z=Q((c,a)=>{const{value:n,defaultValue:r,onChange:x,size:d,wrapperProps:o,children:h,readOnly:u,...s}=W("SwitchGroup",ye,c),[t,w]=$({value:n,defaultValue:r,finalValue:[],onChange:x}),b=k=>{const j=k.currentTarget.value;!u&&w(t.includes(j)?t.filter(N=>N!==j):[...t,j])};return e.jsx(Te,{value:{value:t,onChange:b,size:d},children:e.jsx(F.Wrapper,{size:d,ref:a,...o,...s,labelElement:"div",__staticSelector:"SwitchGroup",children:e.jsx(be,{role:"group",children:h})})})});z.classes=F.Wrapper.classes;z.displayName="@mantine/core/SwitchGroup";var q={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const ze={labelPosition:"right",withThumbIndicator:!0},Ne=ce((c,{radius:a,color:n,size:r})=>({root:{"--switch-radius":a===void 0?void 0:le(a),"--switch-height":g(r,"switch-height"),"--switch-width":g(r,"switch-width"),"--switch-thumb-size":g(r,"switch-thumb-size"),"--switch-label-font-size":g(r,"switch-label-font-size"),"--switch-track-label-padding":g(r,"switch-track-label-padding"),"--switch-color":n?oe(n,c):void 0}})),C=Q((c,a)=>{const n=W("Switch",ze,c),{classNames:r,className:x,style:d,styles:o,unstyled:h,vars:u,color:s,label:t,offLabel:w,onLabel:b,id:k,size:j,radius:N,wrapperProps:D,thumbIcon:I,checked:S,defaultChecked:J,onChange:v,labelPosition:_,description:K,error:G,disabled:L,variant:M,rootRef:X,mod:Y,withThumbIndicator:Z,...ee}=n,l=Pe(),se=j||(l==null?void 0:l.size),f=re({name:"Switch",props:n,classes:q,className:x,style:d,classNames:r,styles:o,unstyled:h,vars:u,varsResolver:Ne}),{styleProps:te,rest:B}=ae(ee),V=ne(k),m=l?{checked:l.value.includes(B.value),onChange:l.onChange}:{},[A,ie]=$({value:m.checked??S,defaultValue:J,finalValue:!1});return e.jsxs(Ce,{...f("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:se,labelPosition:_,label:t,description:K,error:G,disabled:L,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:h,"data-checked":m.checked||S||void 0,variant:M,ref:X,mod:Y,...te,...D,children:[e.jsx("input",{...B,disabled:L,checked:A,"data-checked":m.checked||S||void 0,onChange:T=>{var E;l?(E=m.onChange)==null||E.call(m,T):v==null||v(T),ie(T.currentTarget.checked)},id:V,ref:a,type:"checkbox",role:"switch",...f("input")}),e.jsxs(R,{"aria-hidden":"true",mod:{error:G,"label-position":_,"without-labels":!b&&!w},...f("track"),children:[e.jsx(R,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":Z&&!I},...f("thumb"),children:I}),e.jsx("span",{...f("trackLabel"),children:A?b:w})]})]})});C.classes={...q,...ke};C.displayName="@mantine/core/Switch";C.Group=z;function Ie({searchQuery:c=""}){const{patients:a,isLoading:n,banPatient:r,unbanPatient:x}=ge(),d=de(),o=s=>{d(`/patients/${s}`)},h=(s,t)=>{t?x(s):r(s)},u=a.filter(s=>{const t=c.toLowerCase();return s.fullName.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||s.phoneNumber&&s.phoneNumber.toLowerCase().includes(t)||s.address&&s.address.toLowerCase().includes(t)});return n?e.jsxs(P,{children:[e.jsx(U,{height:40,radius:"sm"}),[1,2,3].map(s=>e.jsx(U,{height:50,radius:"sm",mt:"sm"},s))]}):e.jsxs(i,{highlightOnHover:!0,verticalSpacing:"sm",horizontalSpacing:"lg",children:[e.jsx(i.Thead,{children:e.jsxs(i.Tr,{children:[e.jsx(i.Th,{c:"dimmed",children:"Name"}),e.jsx(i.Th,{c:"dimmed",children:"Email"}),e.jsx(i.Th,{c:"dimmed",children:"Phone"}),e.jsx(i.Th,{c:"dimmed",children:"Status"})]})}),e.jsx(i.Tbody,{children:u.length===0?e.jsx(i.Tr,{children:e.jsx(i.Td,{colSpan:4,children:e.jsx(he,{py:"xl",children:e.jsxs(P,{align:"center",gap:"md",children:[e.jsx(we,{size:30,opacity:.4}),e.jsx(p,{size:"sm",c:"dimmed",children:a.length===0?"No patients found":"No patients match your search"})]})})})}):u.map(s=>e.jsxs(i.Tr,{style:{cursor:"pointer"},onClick:()=>o(s.id),children:[e.jsx(i.Td,{children:e.jsxs(y,{gap:"sm",children:[e.jsx(ue,{color:"#e7edf6",style:{cursor:"pointer"},onClick:()=>o(s.id),size:"md",radius:"xl",variant:"filled",children:e.jsx(p,{fz:"sm",children:me({fullName:s.fullName})})}),e.jsx(p,{size:"sm",fw:600,style:{cursor:"pointer"},onClick:()=>o(s.id),children:s.fullName})]})}),e.jsx(i.Td,{children:e.jsx(p,{size:"sm",c:"dimmed",children:s.email})}),e.jsx(i.Td,{children:e.jsx(p,{size:"sm",c:"dimmed",children:s.phoneNumber||"N/A"})}),e.jsx(i.Td,{children:e.jsxs(y,{gap:"xs",align:"center",onClick:t=>t.stopPropagation(),children:[e.jsx(C,{checked:!s.isBanned,onChange:()=>h(s.id,s.isBanned),color:"green",size:"sm"}),e.jsx(p,{size:"xs",c:s.isBanned?"red":"dimmed",children:s.isBanned?"Banned":"Active"})]})})]},s.id))})]})}function Oe(){const{searchQuery:c}=pe(),a=()=>{console.log("Add patient clicked")};return e.jsx(xe,{pt:12,maw:1232,fluid:!0,children:e.jsxs(P,{children:[e.jsx(Se,{fz:"24px",order:2,children:"Patients"}),e.jsx(y,{mt:40,justify:"flex-end",children:e.jsx(je,{size:"lg",variant:"outline",leftSection:e.jsx(ve,{size:20}),onClick:a,radius:"xl",children:"New Patient"})}),e.jsx(fe,{radius:"md",withBorder:!0,children:e.jsx(Ie,{searchQuery:c})})]})})}export{Oe as default};
