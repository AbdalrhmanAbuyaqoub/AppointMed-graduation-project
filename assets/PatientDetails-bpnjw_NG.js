import{b as T,aF as P,d as B,Q as L,r as U,j as e,C as h,L as E,G as n,P as x,h as o,T as s,f as t,a3 as O,a4 as F,e as Q,ab as G}from"./index-DFVxnAOD.js";import{u as H}from"./useUserQueries-C1VgiVkc.js";import{u as R}from"./useAppointmentQueries-e9U0mnVB.js";import{D as q}from"./DeleteConfirmationModal-DWwarFYD.js";import{A as f}from"./ActionIcon-DaC7Uwra.js";import{I as z}from"./IconArrowLeft-DAxsgdGK.js";import{T as l}from"./Title-Dkvllgxu.js";import{B as j}from"./Badge-DnXky3GM.js";import{I as V,a as J}from"./IconTrash-BJXU6Zy4.js";import{D as K}from"./Divider-DGLTrUdL.js";import{I as W}from"./IconMail-DgMi8WqF.js";import{I as X}from"./IconMapPin-BhUAJ34Z.js";import{I as v}from"./IconCalendar-D0OlBX3z.js";import{T as r}from"./Table-hyCBFR01.js";import"./useQuery-CnVbtgMZ.js";import"./useMutation-C_c6qR0s.js";import"./appointmentService-BTs9EpLU.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y=T("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=T("outline","user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);const _={0:"Scheduled",1:"Cancelled",2:"Completed",3:"No Show"},$={0:"blue",1:"red",2:"green",3:"orange"};function ge(){const{id:u}=P(),c=B();L();const[y,m]=U.useState(!1),{patients:I,isLoading:C,deleteAccount:D,isDeletingAccount:N}=H(),{getAppointmentsByUser:w}=R(),i=I.find(a=>a.id===u),{data:d=[],isLoading:A,error:p}=w(u),b=C||A,k=()=>{i&&(D({email:i.email,id:i.id}),m(!1),c("/patients"))};return b?e.jsx(h,{pt:20,maw:1232,fluid:!0,children:e.jsx(E,{visible:!0})}):i?e.jsx(o,{children:e.jsxs(h,{pt:20,fluid:!0,children:[e.jsxs(n,{mb:"xl",children:[e.jsx(f,{hiddenFrom:"sm",variant:"subtle",onClick:()=>c("/patients"),size:"lg",children:e.jsx(z,{size:20})}),e.jsx(l,{order:2,children:"Patient Details"})]}),e.jsx(x,{p:"xl",radius:"md",withBorder:!0,w:1232,children:e.jsxs(t,{gap:"xl",children:[e.jsxs(n,{gap:"xl",align:"flex-start",children:[e.jsx(O,{size:"xl",radius:"50%",variant:"filled",color:"gray.3",children:e.jsx(s,{fz:30,children:F({fullName:i.fullName})})}),e.jsxs(t,{gap:"xs",style:{flex:1},children:[e.jsx(l,{order:2,fz:28,children:i.fullName}),e.jsxs(n,{gap:"md",children:[e.jsx(j,{size:"lg",variant:"filled",color:"blue",children:"PATIENT"}),e.jsx(j,{variant:"filled",size:"lg",color:i.isBanned?"red":"green",children:i.isBanned?"BANNED":"ACTIVE"})]})]}),e.jsx(Q,{variant:"outline",color:"red",leftSection:e.jsx(V,{size:16}),onClick:()=>m(!0),radius:"md",size:"sm",children:"Delete Patient"})]}),e.jsx(K,{}),e.jsxs(n,{cols:{base:1,sm:2},gap:"xl",children:[e.jsxs(t,{gap:"md",children:[e.jsx(l,{order:3,size:"h4",children:"Basic Information"}),e.jsxs(n,{gap:"md",children:[e.jsx(G,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Full Name:"}),e.jsx(s,{size:"sm",children:i.fullName})]}),e.jsxs(n,{gap:"md",children:[e.jsx(W,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Email:"}),e.jsx(s,{size:"sm",children:i.email})]}),e.jsxs(n,{gap:"md",children:[e.jsx(Z,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Status:"}),e.jsx(s,{size:"sm",children:i.isBanned?"Banned":"Active"})]})]}),e.jsxs(t,{gap:"md",children:[e.jsx(l,{order:3,size:"h4",children:"Contact Information"}),e.jsxs(n,{gap:"md",children:[e.jsx(J,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Phone:"}),e.jsx(s,{size:"sm",children:i.phoneNumber||"Not provided"})]}),e.jsxs(n,{gap:"md",children:[e.jsx(X,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsx(s,{size:"sm",fw:500,children:"Address:"}),e.jsx(s,{size:"sm",children:i.address||"Not provided"})]})]})]})]})}),e.jsx(x,{p:"xl",mt:"xl",radius:"md",withBorder:!0,maw:1232,children:e.jsxs(t,{gap:"xl",children:[e.jsxs(n,{justify:"space-between",align:"center",children:[e.jsx(l,{order:3,children:"Appointment History"}),e.jsxs(n,{gap:"xs",children:[e.jsx(v,{size:20,color:"var(--mantine-color-gray-6)"}),e.jsxs(s,{size:"sm",c:"dimmed",children:[d.length," appointment",d.length!==1?"s":""]})]})]}),p?e.jsx(o,{py:"xl",children:e.jsxs(s,{c:"red",children:["Error loading appointments: ",p.message]})}):d.length===0?e.jsx(o,{py:"xl",children:e.jsxs(t,{align:"center",gap:"md",children:[e.jsx(v,{size:48,opacity:.4}),e.jsx(s,{size:"lg",c:"dimmed",children:"No appointments found"}),e.jsx(s,{size:"sm",c:"dimmed",children:"This patient has no scheduled appointments."})]})}):e.jsxs(r,{highlightOnHover:!0,verticalSpacing:"sm",children:[e.jsx(r.Thead,{children:e.jsxs(r.Tr,{children:[e.jsx(r.Th,{c:"dimmed",children:"Date & Time"}),e.jsx(r.Th,{c:"dimmed",children:"Doctor"}),e.jsx(r.Th,{c:"dimmed",children:"Clinic"}),e.jsx(r.Th,{c:"dimmed",children:"Status"}),e.jsx(r.Th,{c:"dimmed",children:"Notes"})]})}),e.jsx(r.Tbody,{children:d.map(a=>{var g;const S=_[a.status]||"Scheduled",M=$[a.status]||"blue";return e.jsxs(r.Tr,{children:[e.jsx(r.Td,{children:e.jsxs(n,{gap:"xs",children:[e.jsx(Y,{size:16,opacity:.6}),e.jsxs(t,{gap:"0",children:[e.jsx(s,{size:"sm",fw:500,children:new Date(a.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsxs(s,{size:"xs",c:"dimmed",children:[new Date(a.startDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})," ","-"," ",new Date(a.endDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})}),e.jsx(r.Td,{children:e.jsx(s,{size:"sm",fw:500,children:((g=a.doctor)==null?void 0:g.name)||"N/A"})}),e.jsx(r.Td,{children:e.jsx(s,{size:"sm",c:"dimmed",children:a.clinicName||"N/A"})}),e.jsx(r.Td,{children:e.jsx(j,{color:M,variant:"light",size:"sm",children:S})}),e.jsx(r.Td,{children:e.jsx(s,{size:"sm",c:"dimmed",children:a.notes||"No notes"})})]},a.id)})})]})]})}),e.jsx(q,{isOpen:y,onClose:()=>m(!1),onConfirm:k,title:"Delete Patient",itemName:(i==null?void 0:i.fullName)||"this patient",isLoading:N,additionalMessage:"This will permanently delete the patient and all associated data."})]})}):e.jsxs(h,{pt:20,maw:1232,fluid:!0,children:[e.jsxs(n,{mb:"xl",children:[e.jsx(f,{variant:"subtle",onClick:()=>c("/patients"),size:"lg",children:e.jsx(z,{size:20})}),e.jsx(l,{order:2,children:"Patient Not Found"})]}),e.jsx(x,{radius:"md",p:"xl",withBorder:!0,children:e.jsx(o,{children:e.jsx(s,{c:"dimmed",children:"The requested patient could not be found."})})})]})}export{ge as default};
