import{r as e,l as s,m as a,u as o,a as r,c as i,n as l,j as t,U as n,g as c,o as d,B as u,q as m,s as h,v as p,w as x,x as b,y as v,b as g,z as C,f as j,T as y,D as k,e as f,E as w,d as z,F as S,C as P,t as I,H as N,P as _,L as E,G as V,J as L}from"./index-DbEKal5d.js";import{A as T,I as B,u as F}from"./useStore-Dl_y7ruL.js";import{u as q}from"./use-form-Def2xbvG.js";import{A as M,P as R}from"./PasswordInput-M2LdtY_Q.js";import{I as A}from"./IconMail-AMInNEQ-.js";import{I as G}from"./IconCheck-Br1lqS7k.js";import{g as W}from"./get-auto-contrast-value-CGWe5n6U.js";import{I as $,a as D,b as Y}from"./InputsGroupFieldset-CzRzBvcT.js";import{C as H}from"./CheckIcon-CgntXS1v.js";import"./ActionIcon-LAepEItE.js";const J=e.createContext(null),O=J.Provider,U=()=>e.useContext(J),[K,Q]=s();var X={card:"m_26775b0a"};const Z={withBorder:!0},ee=i((e,{radius:s})=>({card:{"--card-radius":c(s)}})),se=a((e,s)=>{const a=o("CheckboxCard",Z,e),{classNames:i,className:c,style:d,styles:u,unstyled:m,vars:h,checked:p,mod:x,withBorder:b,value:v,onClick:g,defaultChecked:C,onChange:j,...y}=a,k=r({name:"CheckboxCard",classes:X,props:a,className:c,style:d,classNames:i,styles:u,unstyled:m,vars:h,varsResolver:ee,rootSelector:"card"}),f=U(),w="boolean"==typeof p?p:f?f.value.includes(v||""):void 0,[z,S]=l({value:w,defaultValue:C,finalValue:!1,onChange:j});return t.jsx(K,{value:{checked:z},children:t.jsx(n,{ref:s,mod:[{"with-border":b,checked:z},x],...k("card"),...y,role:"checkbox","aria-checked":z,onClick:e=>{null==g||g(e),null==f||f.onChange(v||""),S(!z)}})})});se.displayName="@mantine/core/CheckboxCard",se.classes=X;const ae={},oe=a((e,s)=>{const{value:a,defaultValue:r,onChange:i,size:n,wrapperProps:c,children:u,readOnly:m,...h}=o("CheckboxGroup",ae,e),[p,x]=l({value:a,defaultValue:r,finalValue:[],onChange:i});return t.jsx(O,{value:{value:p,onChange:e=>{const s="string"==typeof e?e:e.currentTarget.value;!m&&x(p.includes(s)?p.filter(e=>e!==s):[...p,s])},size:n},children:t.jsx(d.Wrapper,{size:n,ref:s,...c,...h,labelElement:"div",__staticSelector:"CheckboxGroup",children:t.jsx($,{role:"group",children:u})})})});oe.classes=d.Wrapper.classes,oe.displayName="@mantine/core/CheckboxGroup";var re={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const ie={icon:H},le=i((e,{radius:s,color:a,size:o,iconColor:r,variant:i,autoContrast:l})=>{const t=m({color:a||e.primaryColor,theme:e}),n=t.isThemeColor&&void 0===t.shade?`var(--mantine-color-${t.color}-outline)`:t.color;return{indicator:{"--checkbox-size":x(o,"checkbox-size"),"--checkbox-radius":void 0===s?void 0:c(s),"--checkbox-color":"outline"===i?n:h(a,e),"--checkbox-icon-color":r?h(r,e):W(l,e)?p({color:a,theme:e,autoContrast:l}):void 0}}}),te=a((e,s)=>{const a=o("CheckboxIndicator",ie,e),{classNames:i,className:l,style:n,styles:c,unstyled:d,vars:m,icon:h,indeterminate:p,radius:x,color:b,iconColor:v,autoContrast:g,checked:C,mod:j,variant:y,disabled:k,...f}=a,w=h,z=r({name:"CheckboxIndicator",classes:re,props:a,className:l,style:n,classNames:i,styles:c,unstyled:d,vars:m,varsResolver:le,rootSelector:"indicator"}),S=Q(),P="boolean"==typeof C||"boolean"==typeof p?C||p:(null==S?void 0:S.checked)||!1;return t.jsx(u,{ref:s,...z("indicator",{variant:y}),variant:y,mod:[{checked:P,disabled:k},j],...f,children:t.jsx(w,{indeterminate:p,...z("icon")})})});te.displayName="@mantine/core/CheckboxIndicator",te.classes=re;var ne={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const ce={labelPosition:"right",icon:H},de=i((e,{radius:s,color:a,size:o,iconColor:r,variant:i,autoContrast:l})=>{const t=m({color:a||e.primaryColor,theme:e}),n=t.isThemeColor&&void 0===t.shade?`var(--mantine-color-${t.color}-outline)`:t.color;return{root:{"--checkbox-size":x(o,"checkbox-size"),"--checkbox-radius":void 0===s?void 0:c(s),"--checkbox-color":"outline"===i?n:h(a,e),"--checkbox-icon-color":r?h(r,e):W(l,e)?p({color:a,theme:e,autoContrast:l}):void 0}}}),ue=a((s,a)=>{const i=o("Checkbox",ce,s),{classNames:l,className:n,style:c,styles:d,unstyled:m,vars:h,color:p,label:x,id:g,size:C,radius:j,wrapperProps:y,checked:k,labelPosition:f,description:w,error:z,disabled:S,variant:P,indeterminate:I,icon:N,rootRef:_,iconColor:E,onChange:V,autoContrast:L,mod:T,...B}=i,F=U(),q=C||(null==F?void 0:F.size),M=N,R=r({name:"Checkbox",props:i,classes:ne,className:n,style:c,classNames:l,styles:d,unstyled:m,vars:h,varsResolver:de}),{styleProps:A,rest:G}=b(B),W=v(g),$=F?{checked:F.value.includes(G.value),onChange:e=>{F.onChange(e),null==V||V(e)}}:{},Y=e.useRef(null),H=a||Y;return e.useEffect(()=>{H&&"current"in H&&H.current&&(H.current.indeterminate=I||!1)},[I,H]),t.jsx(D,{...R("root"),__staticSelector:"Checkbox",__stylesApiProps:i,id:W,size:q,labelPosition:f,label:x,description:w,error:z,disabled:S,classNames:l,styles:d,unstyled:m,"data-checked":$.checked||k||void 0,variant:P,ref:_,mod:T,...A,...y,children:t.jsxs(u,{...R("inner"),mod:{"data-label-position":f},children:[t.jsx(u,{component:"input",id:W,ref:H,checked:k,disabled:S,mod:{error:!!z,indeterminate:I},...R("input",{focusable:!0,variant:P}),onChange:V,...G,...$,type:"checkbox"}),t.jsx(M,{indeterminate:I,...R("icon")})]})})});ue.classes={...ne,...Y},ue.displayName="@mantine/core/Checkbox",ue.Group=oe,ue.Indicator=te,ue.Card=se;
/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var me=g("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);const he=({onBackToLogin:s})=>{const[a,o]=e.useState(!1),[r,i]=e.useState(!1),{handleForgotPassword:l}=C(),n=q({initialValues:{email:""},validate:{email:e=>e?/^\S+@\S+$/.test(e)?null:"Invalid email address":"Email is required"}}),c=()=>{i(!1),n.reset(),s()};return r?t.jsxs(j,{children:[t.jsx(M,{icon:t.jsx(A,{size:16}),title:"Email Sent",color:"green",variant:"light",children:"We've sent a new password to your email address. Please check your inbox and use the new password to log in."}),t.jsx(y,{ta:"center",size:"sm",mt:"md",children:t.jsxs(T,{component:"button",type:"button",onClick:c,fw:500,disabled:a,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t.jsx(me,{size:16}),"Back to Login"]})})]}):t.jsx("form",{onSubmit:n.onSubmit(async e=>{o(!0);try{const s=await l(e.email);s.success?(i(!0),w.show({title:"Success",message:s.message,color:"green",icon:t.jsx(G,{size:16})}),n.reset()):w.show({title:"Error",message:s.error,color:"red",icon:t.jsx(B,{size:16})})}catch(s){w.show({title:"Error",message:"An unexpected error occurred. Please try again.",color:"red",icon:t.jsx(B,{size:16})})}o(!1)}),children:t.jsxs(j,{children:[t.jsx(k,{required:!0,radius:"md",label:"Email Address",placeholder:"your@email.com",value:n.values.email,onChange:e=>n.setFieldValue("email",e.currentTarget.value),error:n.errors.email,disabled:a,size:"md"}),t.jsx(y,{size:"sm",c:"dimmed",ta:"center",children:"We'll send you a new password to your email address."}),t.jsx(f,{type:"submit",radius:"xl",fullWidth:!0,loading:a,disabled:!n.values.email,size:"lg",mt:"md",children:"Send New Password"}),t.jsx(y,{ta:"center",size:"sm",mt:"md",children:t.jsxs(T,{component:"button",type:"button",onClick:c,fw:500,disabled:a,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t.jsx(me,{size:16}),"Back to Login"]})})]})})},pe=()=>{const s=z(),a=S(),o=F(e=>e.isLoading),{handleLogin:r}=C(),[i,l]=e.useState("login"),[n,c]=e.useState(""),d=q({initialValues:{email:"",password:"",rememberMe:!1},validate:{email:e=>e?/^\S+@\S+$/.test(e)?null:"Invalid email address":"Email is required",password:e=>e?null:"Password is required"}});e.useEffect(()=>{var e;(null==(e=a.state)?void 0:e.message)&&(c(a.state.message),a.state.email&&d.setFieldValue("email",a.state.email),s(a.pathname,{replace:!0}))},[a.state,s,d]);return t.jsxs(P,{w:"100vw",h:"100vh",fluid:!0,bg:I.backgroundColor,children:[t.jsx(N,{h:"50"}),t.jsxs(_,{withBorder:!0,shadow:"md",radius:"lg",p:"xl",w:"100%",maw:500,mx:"auto",pos:"relative",children:[t.jsx(E,{visible:o,overlayProps:{blur:2}}),t.jsx(V,{pb:"md",justify:"center",children:t.jsx(L,{height:60,width:60,onClick:()=>s("/"),cursor:"pointer"})}),t.jsx(y,{size:"xl",ta:"center",mb:"xl",fw:500,children:"login"===i?"Login to your account":"Reset Your Password"}),n&&t.jsx(M,{icon:t.jsx(G,{size:16}),title:"Success",color:"green",variant:"light",mb:"md",withCloseButton:!0,onClose:()=>c(""),children:n}),"login"===i?t.jsx("form",{onSubmit:d.onSubmit(async e=>{try{const s=await r({email:e.email,password:e.password,rememberMe:e.rememberMe});if(!(null==s?void 0:s.success))throw new Error((null==s?void 0:s.error)||"Login failed")}catch(s){}}),children:t.jsxs(j,{gap:"md",children:[t.jsx(k,{required:!0,label:"Email",placeholder:"your@email.com",value:d.values.email,onChange:e=>d.setFieldValue("email",e.currentTarget.value),error:d.errors.email,radius:"md",disabled:o,size:"md"}),t.jsx(R,{required:!0,label:"Password",placeholder:"Your password",value:d.values.password,onChange:e=>d.setFieldValue("password",e.currentTarget.value),error:d.errors.password,radius:"md",disabled:o,size:"md"}),t.jsx(ue,{label:"Remember me",checked:d.values.rememberMe,onChange:e=>d.setFieldValue("rememberMe",e.currentTarget.checked),disabled:o,size:"sm"}),t.jsx(V,{justify:"flex-end",children:t.jsx(T,{component:"button",type:"button",onClick:()=>{l("forgot-password")},size:"sm",disabled:o,children:"Forgot Password?"})}),t.jsx(f,{type:"submit",radius:"xl",fullWidth:!0,loading:o,size:"lg",mt:"md",children:"Sign in"}),t.jsxs(y,{ta:"center",size:"sm",mt:"md",children:["Don't have an account?"," ",t.jsx(T,{component:"button",type:"button",onClick:()=>s("/register"),fw:500,disabled:o,children:"Sign up"})]})]})}):t.jsx(he,{onBackToLogin:()=>{l("login")}})]})]})};export{pe as default};
