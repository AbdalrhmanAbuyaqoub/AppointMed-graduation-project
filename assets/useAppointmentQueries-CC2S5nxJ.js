import{u as i}from"./useQuery-CVFAupRI.js";import{aM as v}from"./index-2K_n1FRf.js";import{u as o}from"./useMutation-BDHTUPci.js";import{a as e}from"./appointmentService-DmIbX8yT.js";function I(){const n=v(),{data:r=[],isLoading:u,error:m}=i({queryKey:["appointments"],queryFn:e.getAllAppointments,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),s=t=>i({queryKey:["appointment",t],queryFn:()=>e.getAppointmentById(t),enabled:!!t}),c=t=>i({queryKey:["appointments","clinic",t],queryFn:()=>e.getAppointmentsByClinic(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),y=t=>i({queryKey:["appointments","doctor",t],queryFn:()=>e.getAppointmentsByDoctor(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),l=t=>i({queryKey:["appointments","user",t],queryFn:()=>e.getAppointmentsByUser(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:0}),d=t=>i({queryKey:["appointment-status",t],queryFn:()=>e.getAppointmentStatus(t),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!0}),A=o({mutationFn:e.createAppointment,onSuccess:()=>{n.invalidateQueries({queryKey:["appointments"]})}}),q=o({mutationFn:e.createAppointmentWithPatient,onSuccess:t=>{var p,a;n.invalidateQueries({predicate:h=>h.queryKey[0]==="appointments"}),(p=t==null?void 0:t.appointment)!=null&&p.doctorId&&n.invalidateQueries({queryKey:["appointments","doctor",t.appointment.doctorId]}),(a=t==null?void 0:t.appointment)!=null&&a.userId&&localStorage.setItem("lastPatientUserId",t.appointment.userId)}}),f=o({mutationFn:e.updateAppointment,onSuccess:()=>{n.invalidateQueries({predicate:t=>t.queryKey[0]==="appointments"})}}),F=o({mutationFn:e.deleteAppointment,onSuccess:()=>{n.invalidateQueries({predicate:t=>t.queryKey[0]==="appointments"})}}),g=o({mutationFn:({appointmentId:t,newStatus:p})=>e.updateAppointmentStatus(t,p),onSuccess:()=>{n.invalidateQueries({predicate:t=>t.queryKey[0]==="appointments"})}});return{appointments:r,isLoadingAppointments:u,appointmentsError:m,getAppointmentById:s,getAppointmentsByClinic:c,getAppointmentsByDoctor:y,getAppointmentsByUser:l,getAppointmentStatus:d,createAppointment:A,createAppointmentWithPatient:q,updateAppointment:f,deleteAppointment:F,updateAppointmentStatus:g}}export{I as u};
