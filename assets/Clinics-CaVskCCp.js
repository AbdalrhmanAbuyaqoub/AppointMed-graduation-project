import{d as v,aD as z,j as e,k as S,f as j,G as c,aE as y,T as d,e as u,r as p,ao as E,D as I,ap as b,C as f,L as k,h as D,I as N}from"./index-DFVxnAOD.js";import{T as g}from"./Title-Dkvllgxu.js";import{I as L}from"./IconCalendar-D0OlBX3z.js";import{B as M}from"./Badge-DnXky3GM.js";import{u as C}from"./useClinicQueries-CQSBc36E.js";import{I as B}from"./IconPlus-DGgkmvZO.js";import{D as H}from"./Divider-DGLTrUdL.js";import{S as O}from"./SimpleGrid-m7bjeiFa.js";import"./useQuery-CnVbtgMZ.js";import"./useMutation-C_c6qR0s.js";function T({clinic:s}){var l,t;const a=v(),{hovered:o,ref:i}=z();return e.jsx(S,{ref:i,padding:"lg",radius:"md",withBorder:!0,style:{transform:o?"translateY(-3px)":"none",transition:"transform 0.1s, box-shadow 0.1s"},children:e.jsxs(j,{gap:"xs",children:[e.jsx(g,{order:3,size:"xl",children:s.name}),e.jsxs(c,{gap:"xs",children:[e.jsx(y,{size:18}),e.jsxs(d,{size:"sm",c:"dimmed",fw:500,children:[((l=s.doctors)==null?void 0:l.length)||0," ",!((t=s.doctors)!=null&&t.length)||s.doctors.length===1?"Doctor":"Doctors"]})]}),s.workingHours&&e.jsxs(c,{gap:"xs",children:[e.jsx(L,{size:18}),e.jsx(d,{size:"sm",c:"dimmed",fw:500,children:s.workingHours})]}),s.specialties&&s.specialties.length>0&&e.jsx(c,{gap:"xs",mt:"xs",children:s.specialties.map(n=>e.jsx(M,{variant:"light",children:n},n))}),e.jsx(u,{variant:"light",fullWidth:!0,mt:"xl",radius:"md",onClick:()=>a(`/clinics/${s.id}`),children:"Manage Clinic"})]})})}function G({opened:s,onClose:a}){const[o,i]=p.useState(""),[l,t]=p.useState(!1),{createClinic:n,isCreating:m}=C(),x=async h=>{if(h.preventDefault(),!o.trim()){t(!0);return}try{await n({name:o.trim()}),i(""),t(!1),a()}catch(w){console.error("Error creating clinic:",w)}},r=()=>{i(""),t(!1),a()};return e.jsx(E,{xOffset:{m:200},centered:!0,withOverlay:!1,opened:s,onClose:r,title:e.jsx(d,{fz:"lg",fw:700,children:"Create New Clinic"}),size:"md",radius:"md",children:e.jsxs("form",{onSubmit:x,children:[e.jsx(I,{labelProps:{ml:4,fz:"md"},label:"Clinic Name",placeholder:"eg. Heart Clinic",value:o,onChange:h=>{i(h.target.value),l&&t(!1)},withAsterisk:!0,error:l?"Clinic name is required":null,size:"md"}),e.jsxs(c,{justify:"flex-end",mt:"xl",children:[e.jsx(u,{variant:"outline",onClick:r,children:"Cancel"}),e.jsx(u,{type:"submit",loading:m,children:"Create Clinic"})]})]})})}function K(){const[s,a]=p.useState(!1),{searchQuery:o}=b(),{clinics:i=[],isLoading:l,isError:t,error:n}=C(),m=i.filter(r=>r.name.toLowerCase().includes(o.toLowerCase()));if(t)return e.jsx(f,{children:e.jsxs(d,{c:"red",children:["Error: ",(n==null?void 0:n.message)||"An error occurred"]})});if(l)return e.jsxs(f,{children:[e.jsx(k,{visible:!0}),e.jsx(d,{children:"Loading clinics..."})]});const x=r=>e.jsx(D,{children:e.jsxs(j,{align:"center",gap:"md",children:[e.jsx(N,{size:50,opacity:.4}),e.jsx(d,{size:"lg",fw:400,c:"dimmed",children:r})]})});return e.jsxs(f,{pt:12,maw:1232,fluid:!0,children:[e.jsxs(j,{children:[e.jsx(g,{fz:"24px",fw:700,order:2,children:"Clinics Management"}),e.jsx(c,{mt:40,justify:"flex-end",children:e.jsx(u,{size:"lg",radius:"xl",variant:"outline",leftSection:e.jsx(B,{size:20}),onClick:()=>a(!0),children:"New Clinic"})}),e.jsx(H,{}),!i||i.length===0?x("No clinics found."):m.length===0?x("No clinics found matching your search."):e.jsx(O,{cols:{base:1,sm:2,md:2,lg:3},spacing:"xl",children:m.map(r=>e.jsx(T,{clinic:r,doctors:r.doctors},r.id))})]}),e.jsx(G,{opened:s,onClose:()=>a(!1)})]})}export{K as default};
